# [機能名] 技術実装

**このフォルダはClaude Code（開発者）の作業エリアです。**

**最終更新**: YYYY-MM-DD

---

## 📝 ここに何を書くか

### ✅ 書くべきこと

**技術的な実装詳細**:
- どの技術を使うか（Stripe, Supabase, Next.jsなど）
- どういうアーキテクチャで実装するか
- データベース設計
- API設計
- エラーハンドリング

---

### ❌ 書かないこと

**ユーザー体験の定義**:
- 「ユーザーがボタンをクリックしたら...」
- 「こうあるべき」という要件
→ これらは `../user-experience/` に書く

---

## 📂 ファイルの使い分け

### plans/ （実装計画）
**いつ使う**: 実装を開始する前（必須）

**書く内容**:
- TEMPLATE.mdをコピーして使用
- UX要件の確認
- 技術方針の決定
- リスク評価
- テストケース

---

### specifications/ （技術仕様書）
**いつ使う**: システム全体の仕様を記録する時

**書く内容**:
- データベーススキーマ
- API仕様
- アーキテクチャ図
- データフロー

---

### decisions/ （実装決定ログ）
**いつ使う**: 重要な技術選定をした時

**書く内容**:
- なぜこの技術を選んだか
- なぜこのアーキテクチャにしたか
- 検討して却下した方法

---

## 🔄 使い方の流れ

### 新しい実装を開始する時

1. **UX定義を読む**（必須）
   - `../user-experience/flows.md`
   - `../user-experience/requirements.md`
   - `../user-experience/edge-cases.md`

2. **実装計画を作成**
   - `plans/TEMPLATE.md` をコピー
   - `plans/YYYY-MM-DD-task-name.md` として保存
   - UX要件を満たすための技術方針を記述

3. **実装**
   - 計画に従ってコーディング

4. **ドキュメント更新**
   - 重要な決定を `decisions/decisions.md` に記録
   - エラーは `../troubleshooting/error-database.md` に記録

---

## 🎯 重要なポイント

### 1. UX定義を必ず読む

**理由**: UX要件を理解せずに実装すると、ユーザーの期待と異なる動作になる。

**例**:
```
UX要件: 「決済完了後、即座に新プランが使える」
技術実装: Webhook → DB更新 → リアルタイム同期
```

---

### 2. 「なぜ」を記録する

**Good**:
```
## 技術選定: Stripe Checkout

**選んだ理由**:
1. PCI DSS準拠が不要（Stripe側で対応）
2. カード情報を自サイトで扱わない → セキュリティリスク低減
3. 実装コストが低い

**検討して却下した方法**:
- 自前の決済フォーム → PCI DSS準拠が必要
```

**Bad**:
```
Stripe Checkoutを使う
```

---

### 3. 計画なしに実装開始しない

**必ず**実装計画を作成してから実装を開始してください。

---

**技術実装は、UX要件を満たすための手段です。**
**UX定義を理解してから実装してください。**

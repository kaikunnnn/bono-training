# データ移行に必要な情報チェックリスト

**作成日**: 2025-11-19
**目的**: 移行計画を進めるために、あなたから教えてもらう必要がある情報をまとめる

---

## ✅ 情報収集チェックリスト

### 📊 **カテゴリ1: Supabaseの現状確認**（最優先）

#### 1-1. テーブルのデータ数

**確認方法**: Supabase Dashboard → Table Editor

| テーブル名 | データ数 | 備考 |
|-----------|---------|------|
| `stripe_customers` | ？件 | |
| `user_subscriptions` | ？件 | |
| `subscriptions` | ？件 | |

**確認手順**:
```
1. https://supabase.com/dashboard/project/fryogvfhymnpiqwssmuu にアクセス
2. 左メニュー「Table Editor」をクリック
3. 各テーブルを選択
4. 右下に表示される「X rows」をメモ
```

---

#### 1-2. テストデータの有無

**質問**:
- [ ] テーブルにデータが入っている場合、それはテストデータですか？本番データですか？
- [ ] テストデータがある場合、削除してもOKですか？

**確認方法**:
```
Table Editorで実際のデータを見て、
- メールアドレスが test@example.com のようなもの → テストデータ
- 実際のユーザーのメールアドレス → 本番データ
```

---

### 💳 **カテゴリ2: Stripeの現状確認**（最優先）

#### 2-1. 顧客データのサンプル（3-5件）

**確認方法**: Stripe Dashboard → 顧客

**記録フォーマット**:
```
顧客1:
- Customer ID: cus_xxxxx
- メールアドレス: user@example.com
- サブスクリプションID: sub_xxxxx
- プラン名: Standard
- 価格: ¥6,800/月
- 更新間隔: 1ヶ月ごと / 3ヶ月ごと
- ステータス: Active / Canceled
- キャンセル予定?: はい（2025-XX-XX） / いいえ

顧客2:
...
```

**確認手順**:
```
1. https://dashboard.stripe.com にログイン
2. 必ず本番モード（右上のトグルで確認）に切り替え
3. 左メニュー「顧客」をクリック
4. 適当に3-5人の顧客を開いて上記フォーマットで記録
```

---

#### 2-2. プランの種類と価格

**確認方法**: Stripe Dashboard → 商品

**記録フォーマット**:
```
プラン1:
- 商品名: Standard
- Price ID: price_xxxxx
- 価格: ¥6,800/月
- 更新間隔: 1ヶ月ごと
- アクティブなサブスクリプション数: X件

プラン2:
- 商品名: Standard
- Price ID: price_yyyyy
- 価格: ¥5,800/月
- 更新間隔: 3ヶ月ごと
- アクティブなサブスクリプション数: X件

...
```

**確認手順**:
```
1. Stripe Dashboard → 左メニュー「商品」をクリック
2. 各商品を開いて、料金（Price）の情報を確認
3. 上記フォーマットで記録
```

---

### 👥 **カテゴリ3: MemberStackの情報**（中優先）

#### 3-1. MemberStackへのアクセス

**質問**:
- MemberStackのダッシュボードにアクセスできますか？
  - [ ] はい → URLを教えてください: _______________
  - [ ] いいえ → アカウント情報がわかりません

---

#### 3-2. MemberStackのデータ

**確認方法**: MemberStack Dashboard

**記録すべき情報**:
- 登録ユーザー数: ？人
- MemberStackでのプラン設定: あり / なし
- Stripeとの連携状態: 連携済み / 未連携

**確認手順**（MemberStackにアクセスできる場合）:
```
1. MemberStackダッシュボードにログイン
2. メンバー一覧を確認して件数をメモ
3. 設定 → Stripe連携を確認
```

---

### 🔑 **カテゴリ4: アクセス情報**（後回しでOK）

#### 4-1. Supabaseのサービスロールキー

**⚠️ これは後で必要になります（今は不要）**

移行スクリプトを実行する際に必要になりますが、今の段階では不要です。

**取得方法（後で必要になったら）**:
```
1. https://supabase.com/dashboard/project/fryogvfhymnpiqwssmuu/settings/api
2. 「Project API keys」セクション
3. service_role の「Reveal」をクリック
4. コピーして保管（絶対に公開しない）
```

---

## 📋 優先順位まとめ

### **🔴 今すぐ教えてほしい情報（必須）**

1. ✅ **Supabaseのテーブルデータ数**
   - stripe_customers: ？件
   - user_subscriptions: ？件
   - subscriptions: ？件

2. ✅ **Stripeの顧客サンプル（3-5件）**
   - 上記フォーマットで記録

3. ✅ **Stripeのプラン一覧**
   - 全プランの価格と件数

---

### **🟡 次に教えてほしい情報（重要）**

4. **テストデータの有無**
   - Supabaseにテストデータがあるか

5. **MemberStackの情報**
   - アクセス可能か
   - ユーザー数

---

### **🟢 後で必要になる情報（今は不要）**

6. **Supabaseのサービスロールキー**
   - 移行スクリプト実行時に必要

---

## 📝 情報提供のフォーマット

以下のフォーマットで教えてください：

```
【Supabase】
- stripe_customers: X件
- user_subscriptions: X件
- subscriptions: X件
- テストデータ: ある / ない
  （ある場合、削除してOK?: はい / いいえ）

【Stripe - 顧客サンプル】
顧客1:
- Customer ID: cus_xxxxx
- Email: user@example.com
- Subscription ID: sub_xxxxx
- プラン: Standard ¥6,800/月（1ヶ月ごと）
- ステータス: Active

顧客2:
...

【Stripe - プラン一覧】
プラン1:
- 商品名: Standard
- Price ID: price_xxxxx
- 価格: ¥6,800/月（1ヶ月ごと）
- アクティブ数: X件

プラン2:
...

【MemberStack】
- アクセス: できる / できない
- ユーザー数: X人（わかれば）
```

---

## 🎯 これらの情報があれば...

以下を作成できます：

1. ✅ **正確な移行スクリプト**
   - あなたのデータ構造に合わせたスクリプト

2. ✅ **データマッピング定義**
   - 既存プラン → 新プランの対応表

3. ✅ **移行手順書（詳細版）**
   - 具体的なコマンド付き

4. ✅ **テスト計画**
   - サンプルデータを使ったテスト

---

## 💡 代替案

**もし上記の確認が難しい場合**:

### オプションA: スクリーンショットを送る

以下のスクリーンショットを撮って送ってください（個人情報は隠す）：
- Supabase Table Editorの画面
- Stripe 顧客一覧の画面
- Stripe 商品一覧の画面

### オプションB: CSVエクスポート

Stripe Dashboardから：
1. 顧客データをCSVでエクスポート
2. サブスクリプションデータをCSVでエクスポート
3. ファイルを共有（メールアドレスなど個人情報は削除して）

---

## ⏰ 所要時間の目安

- Supabase確認: **5分**
- Stripe確認: **10分**
- MemberStack確認: **5分**

**合計**: 約20分

---

**まずは🔴の必須情報だけでも教えてください！**
それだけで次のステップに進めます👍

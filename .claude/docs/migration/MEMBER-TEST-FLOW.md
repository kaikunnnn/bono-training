# メンバーテストフロー

**作成日**: 2025-12-05
**対象**: Phase B テスト協力メンバー

---

## 重要な前提

### パスワードについて

**旧システム（Memberstack）のパスワードは使えません。**

移行により認証システムが変わったため、新しいパスワードを設定する必要があります。

---

## テスト依頼フロー（運営側）

### Step 1: テスト対象ユーザーを選定

- 連絡が取れるアクティブメンバー
- できれば異なるプラン（standard/feedback）を含む

### Step 2: テスト依頼メッセージを送信

以下のテンプレートを使用:

---

**件名**: 【ご協力のお願い】新サイトログインテスト

**本文**:

```
○○さん

いつもBONOをご利用いただきありがとうございます。

現在、システムの移行作業を行っており、
新サイトでのログインテストにご協力いただけないでしょうか。

【お願いしたいこと】
1. 新サイトにアクセス
2. パスワードを再設定（※旧パスワードは使用できません）
3. ログインして動作確認

詳しい手順は以下をご確認ください：
[テスト手順のURL または 下記の手順を記載]

所要時間: 5分程度

お手数をおかけしますが、よろしくお願いいたします。
```

---

## メンバー向けテスト手順

### 【重要】最初にお読みください

システム移行により、**以前のパスワードは使用できません**。
新しいパスワードを設定してからログインしてください。

---

### Step 1: パスワードを再設定する

1. 新サイトにアクセス
   - URL: https://bono-training.vercel.app （※本番URLに変更）

2. ログイン画面で「**パスワードをお忘れですか？**」をクリック

3. メールアドレスを入力して送信

4. 届いたメールのリンクをクリック

5. 新しいパスワードを設定

---

### Step 2: ログインする

1. 設定した新しいパスワードでログイン

2. ログインできたら成功です ✅

---

### Step 3: 動作確認（できれば）

以下が正常に動作するか確認してください：

| 確認項目 | 確認方法 |
|----------|----------|
| サブスク情報 | マイページでプラン名・期限が表示される |
| 限定コンテンツ | レッスンページが閲覧できる |

---

### 問題が発生した場合

以下の情報と一緒にご連絡ください：

- 登録メールアドレス
- どのステップで問題が発生したか
- エラーメッセージ（あれば）

---

## 運営側チェックリスト

### テスト依頼前

- [ ] テスト対象ユーザーを選定（10人）
- [ ] 各ユーザーがSupabaseに存在するか確認
- [ ] テスト依頼メッセージを準備

### テスト実施中

| # | メール | パスワードリセット | ログイン | サブスク表示 | コンテンツ閲覧 | 備考 |
|---|--------|-------------------|----------|--------------|----------------|------|
| 1 | | ⬜ | ⬜ | ⬜ | ⬜ | |
| 2 | | ⬜ | ⬜ | ⬜ | ⬜ | |
| 3 | | ⬜ | ⬜ | ⬜ | ⬜ | |
| 4 | | ⬜ | ⬜ | ⬜ | ⬜ | |
| 5 | | ⬜ | ⬜ | ⬜ | ⬜ | |
| 6 | | ⬜ | ⬜ | ⬜ | ⬜ | |
| 7 | | ⬜ | ⬜ | ⬜ | ⬜ | |
| 8 | | ⬜ | ⬜ | ⬜ | ⬜ | |
| 9 | | ⬜ | ⬜ | ⬜ | ⬜ | |
| 10 | | ⬜ | ⬜ | ⬜ | ⬜ | |

### テスト完了後

- [ ] 8/10以上が成功 → Phase C へ
- [ ] 問題があれば修正対応

---

## よくある問題と対処法

### パスワードリセットメールが届かない

**原因**:
- 迷惑メールフォルダに入っている
- メールアドレスの入力ミス

**対処**:
1. 迷惑メールフォルダを確認してもらう
2. 運営側でSupabase Dashboardから手動送信

### ログインできない

**原因**:
- パスワードリセットが完了していない
- メールアドレスが異なる

**対処**:
1. パスワードリセットを再度実施
2. 登録メールアドレスを確認

### サブスク情報が表示されない

**原因**:
- user_subscriptions にレコードがない
- is_active = false になっている

**対処**:
1. DBでユーザーの状態を確認
2. 必要に応じてデータ修正

### 限定コンテンツが見れない

**原因**:
- plan_members = false になっている
- Sanity側の問題

**対処**:
1. DBで plan_members を確認
2. Sanity側のエラーログを確認

---

## 関連ドキュメント

- [VERIFICATION-TEST-PLAN.md](./VERIFICATION-TEST-PLAN.md) - 全体テスト計画
- [MIGRATION-PLAN.md](./MIGRATION-PLAN.md) - 移行計画

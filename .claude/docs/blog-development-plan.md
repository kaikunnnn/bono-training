# Blog機能 開発計画

作成日: 2025-11-08
ブランチ: feature/blog

## 現状の確認

### ブランチ情報
- **現在のブランチ**: `feature/blog`
- **最終コミット**: 全体 (f241799)
- **開発サーバー**: `http://localhost:8080` で稼働中

### 実装済みの機能

#### ✅ ページ構成
- `/blog` - ブログ一覧ページ
- `/blog/:slug` - 記事詳細ページ
- `/blog/category/:category` - カテゴリページ
- `/blog/components-preview` - コンポーネントプレビュー

#### ✅ コンポーネント
- `BlogList` - 記事一覧表示
- `BlogCard` - 記事カード
- `BlogPostHeader` - 記事ヘッダー
- `CategoryFilter` - カテゴリフィルター
- `Pagination` - ページネーション

#### ✅ データ管理
- `ghostService.ts` - Ghost CMS APIとの連携
- `blogUtils.ts` - ブログデータ取得のユーティリティ
- `mockPosts.ts` - フォールバック用のモックデータ
- Ghost接続失敗時の自動フォールバック機能

#### ✅ その他の機能
- RSSフィード生成
- サイトマップ生成
- SEO対応
- カテゴリフィルタリング
- ページネーション
- フレーマーモーション（アニメーション）

### 必要な環境変数（未設定）

現在、`.env`ファイルに以下の設定が**ありません**：

```env
# Blog設定
VITE_BLOG_DATA_SOURCE=ghost          # 'ghost' または 'mock'
VITE_GHOST_URL=http://localhost:2368 # Ghost CMSのURL
VITE_GHOST_KEY=<Content API Key>     # Ghost Content API Key
```

### Ghost CMS の状態

#### Docker構成
- `docker-compose.yml` が存在 ✅
- Ghost v5-alpine イメージを使用
- ポート: 2368
- データ保存: `./ghost-data` フォルダ

#### 問題点
- **Dockerが起動していない** ❌
  - `docker` コマンドが見つからない
  - Docker Desktopが起動していない可能性

---

## 開発の進め方

### フェーズ1: Mockデータでの動作確認

Ghost CMSなしで、まずmockデータを使ってblog機能をテストします。

#### タスク1-1: `/blog` ページの動作確認
- [ ] `http://localhost:8080/blog` にアクセス
- [ ] 記事一覧が表示されることを確認
- [ ] カテゴリフィルターの動作確認
- [ ] ページネーションの動作確認

#### タスク1-2: 記事詳細ページの確認
- [ ] 記事カードをクリック
- [ ] 記事詳細ページが表示されることを確認
- [ ] 前後の記事ナビゲーション確認
- [ ] 関連記事が表示されることを確認

#### タスク1-3: カテゴリページの確認
- [ ] カテゴリフィルターをクリック
- [ ] カテゴリ別の記事が表示されることを確認

#### タスク1-4: その他の機能確認
- [ ] RSSフィード生成ボタンのテスト
- [ ] サイトマップ生成ボタンのテスト
- [ ] レスポンシブデザインの確認

---

### フェーズ2: Ghost CMSのセットアップ

#### タスク2-1: Docker環境の準備
- [ ] Docker Desktopがインストールされているか確認
  - インストール済み → 起動
  - 未インストール → インストール
- [ ] Docker動作確認: `docker --version`

#### タスク2-2: Ghost CMSの起動
```bash
# Ghostコンテナを起動
docker compose up -d ghost

# ログ確認
docker compose logs -f ghost
```

- [ ] Ghost が起動したことを確認
- [ ] `http://localhost:2368/ghost` で管理画面にアクセス
- [ ] 初期セットアップ（管理者アカウント作成）

#### タスク2-3: Ghost設定
- [ ] 管理画面にログイン
- [ ] Integrations → Add custom integration
- [ ] 新しいIntegrationを作成（例: "BONO Training Blog"）
- [ ] Content API Keyをコピー

#### タスク2-4: 環境変数の設定
`.env`ファイルに以下を追加：

```env
# Blog設定
VITE_BLOG_DATA_SOURCE=ghost
VITE_GHOST_URL=http://localhost:2368
VITE_GHOST_KEY=<ここにContent API Keyを貼り付け>
```

- [ ] 環境変数を設定
- [ ] 開発サーバーを再起動: `npm run dev`

---

### フェーズ3: Ghost CMSとの連携テスト

#### タスク3-1: テスト記事の作成
- [ ] Ghost管理画面で新しい記事を作成
- [ ] タイトル、本文、アイキャッチ画像を設定
- [ ] タグ（カテゴリ）を追加
- [ ] 記事を公開

#### タスク3-2: フロントエンドでの表示確認
- [ ] `/blog` ページでGhostの記事が表示されることを確認
- [ ] 記事詳細ページが正しく表示されることを確認
- [ ] カテゴリフィルターが動作することを確認

#### タスク3-3: エラーハンドリングの確認
- [ ] Ghostを停止した状態で `/blog` にアクセス
- [ ] mockデータにフォールバックすることを確認
- [ ] コンソールに適切なエラーメッセージが表示されることを確認

---

### フェーズ4: デザイン・UXの改善

#### タスク4-1: デザインレビュー
- [ ] ヘッダー・フッターのデザイン確認
- [ ] 記事カードのレイアウト確認
- [ ] 記事詳細ページのタイポグラフィ確認
- [ ] レスポンシブデザインの確認

#### タスク4-2: パフォーマンス最適化
- [ ] 画像の遅延読み込み
- [ ] ページネーションのプリフェッチ
- [ ] Ghost APIのキャッシング

#### タスク4-3: SEO強化
- [ ] メタタグの最適化
- [ ] OGP画像の設定
- [ ] 構造化データの追加

---

### フェーズ5: feature/user_dashboardとのマージ準備

#### タスク5-1: コンフリクトの確認
```bash
# feature/user_dashboardとの差分を確認
git diff feature/user_dashboard..feature/blog
```

- [ ] `App.tsx` のルート設定を確認
- [ ] `package.json` の依存関係を確認
- [ ] その他のコンフリクトを特定

#### タスク5-2: マージ戦略の決定
- [ ] マージするタイミングを決定
- [ ] コンフリクト解決の方針を決定
- [ ] テスト計画を立案

---

## 優先タスク（今すぐやること）

### 🔴 優先度：最高

#### 1. `/blog` ページの動作確認
**目的**: 現在の実装が正しく動作するか確認

**手順**:
```
1. ブラウザで http://localhost:8080/blog を開く
2. 画面に何が表示されるか確認
3. エラーがないか確認
```

**期待される結果**:
- mockデータのブログ記事一覧が表示される
- カテゴリフィルターが機能する
- 記事カードをクリックすると詳細ページに遷移

---

#### 2. Docker Desktop の状態確認
**目的**: Ghost CMSを使うための準備

**手順**:
```bash
# Dockerがインストールされているか確認
docker --version

# もしエラーが出たら
# → Docker Desktopをインストールまたは起動する
```

---

#### 3. 開発要件の確認
**質問**:
1. Ghost CMSを今すぐ使いたいですか？
   - はい → Docker Desktopのセットアップを優先
   - いいえ → mockデータでUI/UXの開発を先に進める

2. blog機能で実装したい特定の機能はありますか？
   - 検索機能
   - タグクラウド
   - 人気記事ランキング
   - コメント機能
   - その他

3. デザインで変更したい箇所はありますか？

---

## 開発スケジュール（案）

### 今週
- [ ] Mockデータでの動作確認
- [ ] Ghost CMSのセットアップ
- [ ] Ghost連携テスト

### 来週
- [ ] デザイン・UX改善
- [ ] パフォーマンス最適化
- [ ] feature/user_dashboardとのマージ準備

### 再来週
- [ ] マージ実行
- [ ] 統合テスト
- [ ] 本番デプロイ準備

---

## 質問・確認事項

次のステップを決めるために、以下を教えてください：

### 質問1: すぐに確認したいこと
- [ ] まず `/blog` ページの動作を確認したい
- [ ] すぐにGhost CMSをセットアップしたい
- [ ] 他に優先したいことがある（具体的に：______）

### 質問2: Dockerの状態
- [ ] Docker Desktopはインストール済み
- [ ] Docker Desktopは未インストール
- [ ] わからない

### 質問3: 開発の目標
最終的に、blog機能で何を実現したいですか？
```
[ここに記入]
```

---

## 次のアクション

1. **まず**: `http://localhost:8080/blog` にアクセスして動作確認
2. **その後**: 上記の質問に答えていただく
3. **最後**: 優先タスクから順番に実装

準備が整いましたら、お知らせください！

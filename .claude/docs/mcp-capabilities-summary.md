# Supabase MCP 機能まとめ

**作成日**: 2025-11-21

---

## ✅ できること

### 1. データベースの読み取り（SELECT）
- **用途**: データ検証、状態確認
- **例**:
  - `user_subscriptions`テーブルで`is_active`が`true`か確認
  - `stripe_customers`テーブルでレコードが存在するか確認
  - Webhookの処理結果を検証

### 2. プロジェクトスコープの制限
- 特定プロジェクトのみにアクセスを限定
- 他のプロジェクトのデータに触れない

### 3. 機能グループの制御
- 必要最小限の機能だけをAIに許可
- 攻撃面を縮小

### 4. 読み取り専用モード（推奨）
- `read_only=true`で設定
- 書き込み操作を完全に禁止

---

## ❌ できないこと

### 1. Stripe Webhookの直接制御
- Webhookの到達確認はStripe Dashboard
- イベントの再送信はStripe Dashboard
- 署名検証の失敗確認はStripe Dashboard

### 2. 本番環境への直接接続（非推奨）
- 本番データへのアクセスは避けるべき
- 開発環境・ブランチで検証

---

## 🔧 現在の問題

**Supabase MCPが接続されているが、実際に使えていない**

原因:
- MCPサーバーは接続済み（`✓ Connected`）
- しかし、Claude Codeから実際にツールを呼び出す方法が不明

---

## 📋 次のアクション

Supabase MCPを実際に使えるようにする手順を確立する

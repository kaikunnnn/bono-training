# ãƒ¬ãƒƒã‚¹ãƒ³ãƒšãƒ¼ã‚¸ã®ä½œæˆ

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

## âœ… 1. ãƒ¬ãƒƒã‚¹ãƒ³ä¸€è¦§ãƒšãƒ¼ã‚¸

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

[x] å®Œäº†

---

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

## 2. ãƒ¬ãƒƒã‚¹ãƒ³è©³ç´°ãƒšãƒ¼ã‚¸ï¼ˆPhase 1: åŸºæœ¬ MVP - Sanity CMS ç‰ˆï¼‰

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

### å®Ÿè£…æ–¹é‡

- **Sanity CMS ã§ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç®¡ç†**ï¼ˆæœ€åˆã‹ã‚‰æœ¬ç•ªç’°å¢ƒã‚’æƒ³å®šï¼‰
- Phase 1 ã§ã¯é€²æ—ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ãªã—ï¼ˆé™çš„è¡¨ç¤ºã®ã¿ï¼‰
- URL: `/lessons/[slug]`
- è¡¨ç¤ºè¦ç´ : Heroã€æ¦‚è¦ã€ç›®çš„ã€ã‚¯ã‚¨ã‚¹ãƒˆä¸€è¦§
- Vimeo å‹•ç”»å¯¾å¿œã‚’å«ã‚€

### æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

- **Sanity CMS**: ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç®¡ç†
- **Sanity Studio**: ç®¡ç†ç”»é¢ï¼ˆãƒ–ãƒ©ã‚¦ã‚¶ãƒ™ãƒ¼ã‚¹ï¼‰
- **@sanity/client**: ãƒ‡ãƒ¼ã‚¿å–å¾—
- **@sanity/image-url**: ç”»åƒæœ€é©åŒ–
- **GROQ**: ã‚¯ã‚¨ãƒªè¨€èªï¼ˆGraphQL ãƒ©ã‚¤ã‚¯ï¼‰

---

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

## ğŸ§ª Phase 1-A: Sanity ä½“é¨“ãƒ»æ¤œè¨¼ï¼ˆã¾ãšè§¦ã£ã¦ã¿ã‚‹ï¼‰

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

**ç›®çš„:** æœ¬æ ¼å®Ÿè£…ã®å‰ã«ã€Sanity ã®ç®¡ç†ç”»é¢ã¨ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ã‚’ä½“é¨“ã—ã¦ã€ä½¿ã„å‹æ‰‹ã‚’ç¢ºèªã™ã‚‹

**æ‰€è¦æ™‚é–“:** 30 åˆ†ã€œ1 æ™‚é–“

**æˆæœç‰©:**

- Sanity Studio ç®¡ç†ç”»é¢ã§ãƒ‡ãƒ¼ã‚¿è¿½åŠ ãƒ»ç·¨é›†ã§ãã‚‹
- ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§ Sanity ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿å–å¾—ãƒ»è¡¨ç¤ºã§ãã‚‹
- Sanity ã®é›°å›²æ°—ãŒæ´ã‚ã‚‹

---

### Step 1: æœ€å°é™ã® Sanity ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ

**1-1. Sanity CLI ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¨ãƒ­ã‚°ã‚¤ãƒ³**

```bash
# ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install -g @sanity/cli

# Sanityã«ãƒ­ã‚°ã‚¤ãƒ³ï¼ˆGoogle/GitHubã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§å¯èƒ½ï¼‰
sanity login
```

**1-2. Sanity ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ**

```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã§å®Ÿè¡Œ
cd /Users/kaitakumi/Documents/bono-training

# Sanityãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆæœŸåŒ–
sanity init
```

**å¯¾è©±å½¢å¼ã®è³ªå•ã«ç­”ãˆã‚‹:**

```
? Select project to use: Create new project
? Your project name: bono-training-cms
? Use the default dataset configuration? Yes
? Project output path: sanity-studio
? Select project template: Clean project with no predefined schemas
? Package manager to use for installing dependencies? npm
```

**1-3. Sanity Studio ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•**

```bash
cd sanity-studio
ls
```

â†’ ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒç”Ÿæˆã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª:

- `sanity.config.ts`
- `schemas/`
- `package.json`

---

### Step 2: ã‚·ãƒ³ãƒ—ãƒ«ãªã‚¹ã‚­ãƒ¼ãƒä½œæˆï¼ˆãƒ†ã‚¹ãƒˆç”¨ãƒ¬ãƒƒã‚¹ãƒ³ï¼‰

ã¾ãšã¯ 1 ã¤ã®ã‚·ãƒ³ãƒ—ãƒ«ãªã‚¹ã‚­ãƒ¼ãƒã§ä½“é¨“ã—ã¾ã™ã€‚

**ä½œæˆãƒ•ã‚¡ã‚¤ãƒ«:** `sanity-studio/schemas/lesson.ts`

```typescript
import { defineType, defineField } from "sanity";

export default defineType({
  name: "lesson",
  title: "ãƒ¬ãƒƒã‚¹ãƒ³",
  type: "document",
  fields: [
    defineField({
      name: "title",
      title: "ã‚¿ã‚¤ãƒˆãƒ«",
      type: "string",
      validation: (Rule) => Rule.required(),
    }),
    defineField({
      name: "slug",
      title: "ã‚¹ãƒ©ãƒƒã‚°",
      type: "slug",
      options: {
        source: "title",
        maxLength: 96,
      },
      validation: (Rule) => Rule.required(),
    }),
    defineField({
      name: "description",
      title: "èª¬æ˜",
      type: "text",
      rows: 3,
    }),
    defineField({
      name: "coverImage",
      title: "ã‚«ãƒãƒ¼ç”»åƒ",
      type: "image",
      options: {
        hotspot: true,
      },
    }),
    defineField({
      name: "category",
      title: "ã‚«ãƒ†ã‚´ãƒª",
      type: "string",
      options: {
        list: [
          { title: "æƒ…å ±è¨­è¨ˆ", value: "ia" },
          { title: "UI", value: "ui" },
          { title: "UX", value: "ux" },
        ],
      },
    }),
    defineField({
      name: "isPremium",
      title: "æœ‰æ–™ãƒ¬ãƒƒã‚¹ãƒ³",
      type: "boolean",
      initialValue: false,
    }),
  ],
  preview: {
    select: {
      title: "title",
      media: "coverImage",
      category: "category",
      isPremium: "isPremium",
    },
    prepare({ title, media, category, isPremium }) {
      return {
        title,
        media,
        subtitle: `${category || "æœªåˆ†é¡"}${isPremium ? " ğŸ”’" : ""}`,
      };
    },
  },
});
```

**æ›´æ–°ãƒ•ã‚¡ã‚¤ãƒ«:** `sanity-studio/schemas/index.ts`

```typescript
import lesson from "./lesson";

export const schemaTypes = [lesson];
```

---

### Step 3: Sanity Studio èµ·å‹•ã—ã¦ç®¡ç†ç”»é¢ã‚’è¦‹ã‚‹

**3-1. Studio èµ·å‹•**

```bash
cd sanity-studio
npm run dev
```

**3-2. ãƒ–ãƒ©ã‚¦ã‚¶ã§ã‚¢ã‚¯ã‚»ã‚¹**

`http://localhost:3333` ã‚’é–‹ã

â†’ **Sanity Studio ç®¡ç†ç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã‚‹**

**ç”»é¢æ§‹æˆ:**

- å·¦ã‚µã‚¤ãƒ‰ãƒãƒ¼: ã€Œãƒ¬ãƒƒã‚¹ãƒ³ã€ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹
- ãƒ¡ã‚¤ãƒ³ã‚¨ãƒªã‚¢: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä¸€è¦§ï¼ˆæœ€åˆã¯ç©ºï¼‰

**3-3. ãƒ‡ãƒ¼ã‚¿è¿½åŠ ä½“é¨“**

1. ã€Œãƒ¬ãƒƒã‚¹ãƒ³ã€ã‚’ã‚¯ãƒªãƒƒã‚¯
2. å³ä¸Šã®ã€Œï¼‹ä½œæˆã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
3. ãƒ•ã‚©ãƒ¼ãƒ ãŒè¡¨ç¤ºã•ã‚Œã‚‹:
   - ã‚¿ã‚¤ãƒˆãƒ«: `ã‚¼ãƒ­ã‹ã‚‰ã¯ã˜ã‚ã‚‹UIæƒ…å ±è¨­è¨ˆ`
   - ã‚¹ãƒ©ãƒƒã‚°: ã€ŒGenerateã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ â†’ è‡ªå‹•ç”Ÿæˆã•ã‚Œã‚‹
   - èª¬æ˜: `æƒ…å ±è¨­è¨ˆã®åŸºç¤ã‚’å­¦ã³ã¾ã™`
   - ã‚«ãƒãƒ¼ç”»åƒ: ä»»æ„ã®ç”»åƒã‚’ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—ï¼ˆã¾ãŸã¯ã‚¹ã‚­ãƒƒãƒ—ï¼‰
   - ã‚«ãƒ†ã‚´ãƒª: `æƒ…å ±è¨­è¨ˆ`ã‚’é¸æŠ
   - æœ‰æ–™ãƒ¬ãƒƒã‚¹ãƒ³: ãƒã‚§ãƒƒã‚¯ãªã—
4. å³ä¸‹ã®ã€ŒPublishã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯

â†’ **ãƒ‡ãƒ¼ã‚¿ãŒä¿å­˜ã•ã‚Œã‚‹ï¼**

**3-4. ç·¨é›†ä½“é¨“**

- ä¿å­˜ã—ãŸãƒ¬ãƒƒã‚¹ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
- ã‚¿ã‚¤ãƒˆãƒ«ã‚’å¤‰æ›´ã—ã¦ã¿ã‚‹
- ã€ŒPublishã€ã‚’ã‚¯ãƒªãƒƒã‚¯ â†’ å³åº§ã«åæ˜ 

**3-5. ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ä½“é¨“ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰**

- ã‚«ãƒãƒ¼ç”»åƒãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—
- Hotspotï¼ˆé‡è¦é ˜åŸŸï¼‰ã‚’è¨­å®šã§ãã‚‹
- è‡ªå‹•çš„ã« CDN ã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã‚‹

â†’ **ã“ã“ã¾ã§ã§ã€Sanity ã®ç®¡ç†ç”»é¢ã®ä½¿ã„å‹æ‰‹ã‚’ç¢ºèªã§ãã¾ã™**

---

### Step 4: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§ãƒ‡ãƒ¼ã‚¿å–å¾—

Sanity ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¦ã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§è¡¨ç¤ºã—ã¦ã¿ã¾ã™ã€‚

**4-1. Sanity Client ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**

```bash
# ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã«æˆ»ã‚‹
cd /Users/kaitakumi/Documents/bono-training

# Sanity Clientã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install @sanity/client @sanity/image-url
```

**4-2. ç’°å¢ƒå¤‰æ•°è¨­å®š**

**ä½œæˆãƒ•ã‚¡ã‚¤ãƒ«:** `.env.local`

```bash
# Sanity Project IDã‚’å–å¾—
cd sanity-studio
sanity manage
```

â†’ ãƒ–ãƒ©ã‚¦ã‚¶ã§ç®¡ç†ç”»é¢ãŒé–‹ã â†’ ã€ŒSettingsã€â†’ã€ŒProject IDã€ã‚’ã‚³ãƒ”ãƒ¼

`.env.local` ã«è¿½åŠ :

```bash
VITE_SANITY_PROJECT_ID=your_project_id_here
VITE_SANITY_DATASET=production
VITE_SANITY_API_VERSION=2024-01-01
```

**4-3. Sanity Client ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ**

**ä½œæˆãƒ•ã‚¡ã‚¤ãƒ«:** `src/lib/sanity.ts`

```typescript
import { createClient } from "@sanity/client";
import imageUrlBuilder from "@sanity/image-url";

export const client = createClient({
  projectId: import.meta.env.VITE_SANITY_PROJECT_ID,
  dataset: import.meta.env.VITE_SANITY_DATASET,
  apiVersion: import.meta.env.VITE_SANITY_API_VERSION || "2024-01-01",
  useCdn: true,
});

const builder = imageUrlBuilder(client);

export function urlFor(source: any) {
  return builder.image(source);
}
```

**4-4. ãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸ä½œæˆ**

**ä½œæˆãƒ•ã‚¡ã‚¤ãƒ«:** `src/pages/SanityTest.tsx`

```typescript
import React, { useState, useEffect } from "react";
import { client, urlFor } from "@/lib/sanity";
import Layout from "@/components/layout/Layout";

interface TestLesson {
  _id: string;
  title: string;
  slug: { current: string };
  description?: string;
  coverImage?: any;
  category?: string;
  isPremium: boolean;
}

const SanityTest: React.FC = () => {
  const [lessons, setLessons] = useState<TestLesson[]>([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);

  useEffect(() => {
    const query = `*[_type == "lesson"] {
      _id,
      title,
      slug,
      description,
      coverImage,
      category,
      isPremium
    }`;

    client
      .fetch(query)
      .then((data) => {
        setLessons(data);
        setLoading(false);
      })
      .catch((err) => {
        setError(err.message);
        setLoading(false);
      });
  }, []);

  if (loading) {
    return (
      <Layout>
        <div className="p-8">
          <h1 className="text-2xl font-bold mb-4">Sanityãƒ†ã‚¹ãƒˆ</h1>
          <p>èª­ã¿è¾¼ã¿ä¸­...</p>
        </div>
      </Layout>
    );
  }

  if (error) {
    return (
      <Layout>
        <div className="p-8">
          <h1 className="text-2xl font-bold mb-4">Sanityãƒ†ã‚¹ãƒˆ</h1>
          <p className="text-red-600">ã‚¨ãƒ©ãƒ¼: {error}</p>
        </div>
      </Layout>
    );
  }

  return (
    <Layout>
      <div className="p-8">
        <h1 className="text-2xl font-bold mb-6">Sanityãƒ†ã‚¹ãƒˆ</h1>

        {lessons.length === 0 ? (
          <p>ãƒ¬ãƒƒã‚¹ãƒ³ãŒã‚ã‚Šã¾ã›ã‚“ã€‚Sanity Studioã§ãƒ‡ãƒ¼ã‚¿ã‚’è¿½åŠ ã—ã¦ãã ã•ã„ã€‚</p>
        ) : (
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            {lessons.map((lesson) => (
              <div
                key={lesson._id}
                className="border rounded-lg p-4 shadow-sm hover:shadow-md transition"
              >
                {lesson.coverImage && (
                  <img
                    src={urlFor(lesson.coverImage).width(400).height(300).url()}
                    alt={lesson.title}
                    className="w-full h-48 object-cover rounded mb-4"
                  />
                )}
                <h2 className="text-xl font-bold mb-2">
                  {lesson.title}
                  {lesson.isPremium && <span className="ml-2">ğŸ”’</span>}
                </h2>
                <p className="text-sm text-gray-600 mb-2">{lesson.category}</p>
                <p className="text-gray-700">{lesson.description}</p>
              </div>
            ))}
          </div>
        )}

        <div className="mt-8 p-4 bg-blue-50 rounded">
          <h2 className="font-bold mb-2">æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—:</h2>
          <ol className="list-decimal list-inside space-y-1">
            <li>Sanity Studioã§ãƒ‡ãƒ¼ã‚¿ã‚’è¿½åŠ ãƒ»ç·¨é›†ã—ã¦ã¿ã‚‹</li>
            <li>ã“ã®ãƒšãƒ¼ã‚¸ã‚’ãƒªãƒ­ãƒ¼ãƒ‰ã—ã¦åæ˜ ã‚’ç¢ºèª</li>
            <li>ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã€ã‚«ãƒ†ã‚´ãƒªå¤‰æ›´ãªã©ã‚’è©¦ã™</li>
            <li>ä½¿ã„å‹æ‰‹ãŒè‰¯ã‘ã‚Œã°æœ¬å®Ÿè£…ã«é€²ã‚€</li>
          </ol>
        </div>
      </div>
    </Layout>
  );
};

export default SanityTest;
```

**4-5. ãƒ«ãƒ¼ãƒˆè¿½åŠ **

**æ›´æ–°ãƒ•ã‚¡ã‚¤ãƒ«:** `src/App.tsx`

```typescript
import SanityTest from "./pages/SanityTest";

// ãƒ«ãƒ¼ãƒˆè¿½åŠ 
<Route path="/sanity-test" element={<SanityTest />} />;
```

---

### Step 5: å‹•ä½œç¢ºèª

**5-1. é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•**

```bash
npm run dev
```

**5-2. ãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸ã«ã‚¢ã‚¯ã‚»ã‚¹**

`http://localhost:5173/sanity-test` ã‚’é–‹ã

**ç¢ºèªãƒã‚¤ãƒ³ãƒˆ:**

- âœ… Sanity Studio ã§è¿½åŠ ã—ãŸãƒ‡ãƒ¼ã‚¿ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- âœ… ç”»åƒãŒ Sanity CDN ã‹ã‚‰é…ä¿¡ã•ã‚Œã‚‹
- âœ… ã‚«ãƒ†ã‚´ãƒªã€æœ‰æ–™ãƒ•ãƒ©ã‚°ãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹

**5-3. ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°ã‚’ä½“é¨“**

1. Sanity Studioï¼ˆ`http://localhost:3333`ï¼‰ã‚’é–‹ã
2. ãƒ¬ãƒƒã‚¹ãƒ³ã®ã‚¿ã‚¤ãƒˆãƒ«ã‚’å¤‰æ›´ â†’ Publish
3. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼ˆ`http://localhost:5173/sanity-test`ï¼‰ã‚’ãƒªãƒ­ãƒ¼ãƒ‰
4. å¤‰æ›´ãŒåæ˜ ã•ã‚Œã‚‹ï¼

**5-4. ç”»åƒç®¡ç†ã‚’ä½“é¨“**

1. Sanity Studio ã§ã‚«ãƒãƒ¼ç”»åƒã‚’è¿½åŠ /å¤‰æ›´
2. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§è‡ªå‹•çš„ã«æœ€é©åŒ–ã•ã‚ŒãŸç”»åƒãŒè¡¨ç¤ºã•ã‚Œã‚‹
3. `urlFor().width(400).height(300)` ã§å‹•çš„ã«ã‚µã‚¤ã‚ºå¤‰æ›´ã§ãã‚‹ã“ã¨ã‚’ç¢ºèª

---

### Phase 1-A ä¸­é–“ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [x] Sanity CLI ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆã§ããŸ
- [x] Sanity Studioï¼ˆ`http://localhost:3333`ï¼‰ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ããŸ
- [x] ç®¡ç†ç”»é¢ã§ãƒ‡ãƒ¼ã‚¿ã‚’è¿½åŠ ãƒ»ç·¨é›†ã§ããŸ
- [x] ç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã§ããŸ
- [x] ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼ˆ`/sanity-test`ï¼‰ã§ãƒ‡ãƒ¼ã‚¿ãŒè¡¨ç¤ºã•ã‚ŒãŸ
- [x] Sanity Studio ã§ã®ç·¨é›†ãŒãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã«åæ˜ ã•ã‚ŒãŸ
- [x] CORSè¨­å®šãŒå®Œäº†ã—ã€ãƒ‡ãƒ¼ã‚¿å–å¾—ãŒã§ããŸ

**âœ… ã“ã“ã¾ã§ã§åŸºæœ¬çš„ãªä½¿ã„æ–¹ã¯ç¢ºèªã§ãã¾ã—ãŸï¼**

---

### Step 6: è¨˜äº‹ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¹ã‚­ãƒ¼ãƒä½œæˆï¼ˆé•·æ–‡å¯¾å¿œï¼‰

Sanityæ¡ç”¨ã®åˆ¤æ–­ã§æœ€ã‚‚é‡è¦ãªã€Œé•·æ–‡å…¥åŠ›ã®å¿«é©ã•ã€ã‚’ç¢ºèªã™ã‚‹ãŸã‚ã€è¨˜äº‹ã‚¹ã‚­ãƒ¼ãƒã‚’ä½œæˆã—ã¾ã™ã€‚

**ç›®çš„:**
- é•·æ–‡ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®å…¥åŠ›ä½“é¨“
- Canvasé€£æºã®è©¦ç”¨
- ãƒ¬ãƒƒã‚¹ãƒ³ã¨è¨˜äº‹ã®é–¢é€£ä»˜ã‘

**6-1. article ã‚¹ã‚­ãƒ¼ãƒä½œæˆ**

**ä½œæˆãƒ•ã‚¡ã‚¤ãƒ«:** `sanity-studio/schemaTypes/article.ts`

```typescript
import { defineType, defineField } from "sanity";

export default defineType({
  name: "article",
  title: "è¨˜äº‹",
  type: "document",
  options: {
    canvasApp: {
      exclude: false, // Canvasã§ä½¿ç”¨å¯èƒ½ã«
    },
  },
  fields: [
    defineField({
      name: "title",
      title: "ã‚¿ã‚¤ãƒˆãƒ«",
      type: "string",
      validation: (Rule) => Rule.required(),
    }),
    defineField({
      name: "slug",
      title: "ã‚¹ãƒ©ãƒƒã‚°",
      type: "slug",
      options: {
        source: "title",
        maxLength: 96,
      },
      validation: (Rule) => Rule.required(),
    }),
    defineField({
      name: "excerpt",
      title: "è¦ç´„",
      type: "text",
      description: "è¨˜äº‹ã®çŸ­ã„è¦ç´„ï¼ˆä¸€è¦§ãƒšãƒ¼ã‚¸ã§è¡¨ç¤ºï¼‰",
      rows: 3,
      validation: (Rule) => Rule.max(200),
    }),
    defineField({
      name: "coverImage",
      title: "ã‚«ãƒãƒ¼ç”»åƒ",
      type: "image",
      options: {
        hotspot: true,
      },
    }),
    defineField({
      name: "content",
      title: "è¨˜äº‹æœ¬æ–‡",
      type: "array",
      of: [
        {
          type: "block",
          styles: [
            { title: "Normal", value: "normal" },
            { title: "H2", value: "h2" },
            { title: "H3", value: "h3" },
            { title: "Quote", value: "blockquote" },
          ],
          marks: {
            decorators: [
              { title: "å¤ªå­—", value: "strong" },
              { title: "æ–œä½“", value: "em" },
              { title: "ã‚³ãƒ¼ãƒ‰", value: "code" },
            ],
            annotations: [
              {
                title: "ãƒªãƒ³ã‚¯",
                name: "link",
                type: "object",
                fields: [
                  {
                    title: "URL",
                    name: "href",
                    type: "url",
                  },
                ],
              },
            ],
          },
        },
        {
          type: "image",
          options: { hotspot: true },
          fields: [
            {
              name: "alt",
              type: "string",
              title: "ä»£æ›¿ãƒ†ã‚­ã‚¹ãƒˆ",
            },
            {
              name: "caption",
              type: "string",
              title: "ã‚­ãƒ£ãƒ—ã‚·ãƒ§ãƒ³",
            },
          ],
        },
      ],
      options: {
        canvasApp: {
          purpose: "è¨˜äº‹ã®ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã€‚è¦‹å‡ºã—ã€æ®µè½ã€ç”»åƒã€ãƒªãƒ³ã‚¯ã‚’å«ã‚€é•·æ–‡è¨˜äº‹",
        },
      },
      validation: (Rule) => Rule.required(),
    }),
    defineField({
      name: "relatedLesson",
      title: "é–¢é€£ãƒ¬ãƒƒã‚¹ãƒ³",
      type: "reference",
      to: [{ type: "lesson" }],
      description: "ã“ã®è¨˜äº‹ã«é–¢é€£ã™ã‚‹ãƒ¬ãƒƒã‚¹ãƒ³",
    }),
    defineField({
      name: "publishedAt",
      title: "å…¬é–‹æ—¥",
      type: "datetime",
      initialValue: () => new Date().toISOString(),
    }),
    defineField({
      name: "author",
      title: "è‘—è€…",
      type: "string",
    }),
    defineField({
      name: "tags",
      title: "ã‚¿ã‚°",
      type: "array",
      of: [{ type: "string" }],
      options: {
        layout: "tags",
      },
    }),
    defineField({
      name: "isPremium",
      title: "æœ‰æ–™è¨˜äº‹",
      type: "boolean",
      initialValue: false,
    }),
  ],
  preview: {
    select: {
      title: "title",
      media: "coverImage",
      author: "author",
      isPremium: "isPremium",
    },
    prepare({ title, media, author, isPremium }) {
      return {
        title,
        media,
        subtitle: `${author || "è‘—è€…æœªè¨­å®š"}${isPremium ? " ğŸ”’" : ""}`,
      };
    },
  },
});
```

**6-2. ã‚¹ã‚­ãƒ¼ãƒã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ**

**æ›´æ–°ãƒ•ã‚¡ã‚¤ãƒ«:** `sanity-studio/schemaTypes/index.ts`

```typescript
import lesson from "./lesson";
import article from "./article";

export const schemaTypes = [lesson, article];
```

**6-3. lesson ã‚¹ã‚­ãƒ¼ãƒã«é–¢é€£è¨˜äº‹ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è¿½åŠ **

**æ›´æ–°ãƒ•ã‚¡ã‚¤ãƒ«:** `sanity-studio/schemaTypes/lesson.ts`

æœ€å¾Œã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¨ã—ã¦ä»¥ä¸‹ã‚’è¿½åŠ :

```typescript
defineField({
  name: "relatedArticles",
  title: "é–¢é€£è¨˜äº‹",
  type: "array",
  of: [{ type: "reference", to: [{ type: "article" }] }],
  description: "ã“ã®ãƒ¬ãƒƒã‚¹ãƒ³ã«é–¢é€£ã™ã‚‹è¨˜äº‹",
}),
```

**6-4. Studioã‚’å†èµ·å‹•**

```bash
# Ctrl+C ã§Studioã‚’åœæ­¢
# å†èµ·å‹•
cd sanity-studio
npm run dev
```

â†’ `http://localhost:3333` ã§ã€Œè¨˜äº‹ã€ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã‚‹

---

### Step 7: Canvasé€£æºã®è¨­å®šï¼ˆé•·æ–‡åŸ·ç­†ä½“é¨“ã®ãŸã‚ï¼‰

Canvasã§è¨˜äº‹ã‚’åŸ·ç­†ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã€Studioã‚’ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—ã¦deployã—ã¾ã™ã€‚

**7-1. Studio ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—**

```bash
cd sanity-studio
npm install sanity@latest
```

**7-2. Studioã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆã‚¹ã‚­ãƒ¼ãƒã‚’ã‚¯ãƒ©ã‚¦ãƒ‰ã«åŒæœŸï¼‰**

```bash
npx sanity deploy
```

å¯¾è©±å½¢å¼ã®è³ªå•:
```
? Studio hostname (leave empty for default): ï¼ˆEnterã§ã‚¹ã‚­ãƒƒãƒ—ï¼‰
```

â†’ ãƒ‡ãƒ—ãƒ­ã‚¤å®Œäº†å¾Œã€`https://your-project.sanity.studio` ã®URLãŒè¡¨ç¤ºã•ã‚Œã‚‹

**7-3. Canvas ã§è¨˜äº‹åŸ·ç­†ãƒ†ã‚¹ãƒˆ**

1. `https://www.sanity.io/@oGe8pMXOb/canvas` ã«ã‚¢ã‚¯ã‚»ã‚¹
2. æ–°è¦ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆ
3. é•·æ–‡ã‚’è‡ªç”±ã«æ›¸ã„ã¦ã¿ã‚‹
4. AIã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆï¼ˆGhostwriterï¼‰ã‚’è©¦ã—ã¦ã¿ã‚‹
5. Notesæ©Ÿèƒ½ã‚’è©¦ã™ï¼ˆContext, Fact, Style, Inspirationï¼‰

**7-4. Canvas â†’ Studio ã¸Content Mapping**

1. Canvas ã§è¨˜äº‹ã‚’æ›¸ãçµ‚ãˆãŸã‚‰
2. å³ä¸Šã®ã€ŒMap to Studioã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
3. `article` ã‚¹ã‚­ãƒ¼ãƒã‚’é¸æŠ
4. AIãŒè‡ªå‹•çš„ã«ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ãƒãƒƒãƒ”ãƒ³ã‚°
5. Studioã§ç¢ºèªãƒ»ç·¨é›†

---

### Step 8: Studioã§ç›´æ¥é•·æ–‡è¨˜äº‹ã‚’ä½œæˆï¼ˆCanvasæ¯”è¼ƒç”¨ï¼‰

Canvas ã¨ Studio ã®ä¸¡æ–¹ã§è¨˜äº‹ä½œæˆã‚’ä½“é¨“ã—ã¦æ¯”è¼ƒã—ã¾ã™ã€‚

**8-1. Studioã§è¨˜äº‹ä½œæˆ**

1. `http://localhost:3333` ã«ã‚¢ã‚¯ã‚»ã‚¹
2. ã€Œè¨˜äº‹ã€â†’ã€Œæ–°è¦ä½œæˆã€
3. ä»¥ä¸‹ã®å†…å®¹ã§è¨˜äº‹ã‚’ä½œæˆ:

```
ã‚¿ã‚¤ãƒˆãƒ«: æƒ…å ±è¨­è¨ˆã®åŸºç¤çŸ¥è­˜
ã‚¹ãƒ©ãƒƒã‚°: information-architecture-basics (Generate)
è¦ç´„: æƒ…å ±è¨­è¨ˆã®åŸºæœ¬æ¦‚å¿µã¨UIãƒ‡ã‚¶ã‚¤ãƒ³ã¸ã®å¿œç”¨æ–¹æ³•ã‚’è§£èª¬ã—ã¾ã™
ã‚«ãƒãƒ¼ç”»åƒ: ä»»æ„ã®ç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
è¨˜äº‹æœ¬æ–‡: â† ã“ã“ã§é•·æ–‡å…¥åŠ›ã‚’è©¦ã™

ã€è¨˜äº‹æœ¬æ–‡ã®ã‚µãƒ³ãƒ—ãƒ«æ§‹æˆã€‘
- H2: æƒ…å ±è¨­è¨ˆã¨ã¯
  - æ®µè½: é•·æ–‡ãƒ†ã‚­ã‚¹ãƒˆï¼ˆ200-300æ–‡å­—ï¼‰
  - ç”»åƒæŒ¿å…¥
- H2: 4ã¤ã®åŸºæœ¬åŸå‰‡
  - æ®µè½: èª¬æ˜æ–‡
  - H3: çµ„ç¹”åŒ–
    - æ®µè½: è©³ç´°èª¬æ˜
  - H3: ãƒ©ãƒ™ãƒªãƒ³ã‚°
    - æ®µè½: è©³ç´°èª¬æ˜
  - ç”»åƒæŒ¿å…¥
- H2: å®Ÿè·µæ–¹æ³•
  - æ®µè½: ã¾ã¨ã‚
  - ãƒªãƒ³ã‚¯æŒ¿å…¥

é–¢é€£ãƒ¬ãƒƒã‚¹ãƒ³: ã€Œã‚¼ãƒ­ã‹ã‚‰å§‹ã‚ã‚‹UIæƒ…å ±è¨­è¨ˆã€ã‚’é¸æŠ
å…¬é–‹æ—¥: ï¼ˆè‡ªå‹•è¨­å®šï¼‰
è‘—è€…: ã‚ãªãŸã®åå‰
ã‚¿ã‚°: æƒ…å ±è¨­è¨ˆ, UI, åŸºç¤
```

4. ã€ŒPublishã€ã‚’ã‚¯ãƒªãƒƒã‚¯

**8-2. é•·æ–‡å…¥åŠ›ã®ä½¿ã„å¿ƒåœ°ãƒã‚§ãƒƒã‚¯**

- [ ] è¦‹å‡ºã—ã®è¿½åŠ ãŒã‚¹ãƒ ãƒ¼ã‚ºã‹
- [ ] æ®µè½ã®ç·¨é›†ãŒã—ã‚„ã™ã„ã‹
- [ ] ç”»åƒã®æŒ¿å…¥ãŒç°¡å˜ã‹
- [ ] ãƒªãƒ³ã‚¯ã®è¿½åŠ ãŒç›´æ„Ÿçš„ã‹
- [ ] ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒè¦‹ã‚„ã™ã„ã‹
- [ ] å…¨ä½“çš„ãªæ›¸ãå¿ƒåœ°

---

### Step 9: ãƒ¬ãƒƒã‚¹ãƒ³ã«é–¢é€£è¨˜äº‹ã‚’è¨­å®š

ãƒ¬ãƒƒã‚¹ãƒ³ã¨è¨˜äº‹ã®é–¢é€£ä»˜ã‘ã‚’ä½“é¨“ã—ã¾ã™ã€‚

**9-1. æ—¢å­˜ãƒ¬ãƒƒã‚¹ãƒ³ã«é–¢é€£è¨˜äº‹ã‚’è¿½åŠ **

1. Studio ã§ã€Œãƒ¬ãƒƒã‚¹ãƒ³ã€ã‚’é–‹ã
2. ã€Œã‚¼ãƒ­ã‹ã‚‰å§‹ã‚ã‚‹UIæƒ…å ±è¨­è¨ˆã€ã‚’ã‚¯ãƒªãƒƒã‚¯
3. ã€Œé–¢é€£è¨˜äº‹ã€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã§ã€ä½œæˆã—ãŸè¨˜äº‹ã‚’é¸æŠ
4. ã€ŒPublishã€

**9-2. è¨˜äº‹ã‹ã‚‰ãƒ¬ãƒƒã‚¹ãƒ³ã¸ã®å‚ç…§ã‚‚ç¢ºèª**

- è¨˜äº‹ã®ã€Œé–¢é€£ãƒ¬ãƒƒã‚¹ãƒ³ã€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ãƒ¬ãƒƒã‚¹ãƒ³ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª

â†’ **åŒæ–¹å‘ã®é–¢é€£ä»˜ã‘ãŒå®Œæˆ**

---

### Step 10: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§è¨˜äº‹è¡¨ç¤º

è¨˜äº‹ä¸€è¦§ã¨è©³ç´°ãƒšãƒ¼ã‚¸ã‚’ç°¡æ˜“å®Ÿè£…ã—ã¦ã€ãƒ¬ãƒƒã‚¹ãƒ³ã¨ã®é€£æºã‚’ç¢ºèªã—ã¾ã™ã€‚

**10-1. è¨˜äº‹ä¸€è¦§ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä½œæˆ**

**ä½œæˆãƒ•ã‚¡ã‚¤ãƒ«:** `src/pages/SanityArticles.tsx`

```typescript
import React, { useState, useEffect } from "react";
import { Link } from "react-router-dom";
import { client, urlFor } from "@/lib/sanity";
import Layout from "@/components/layout/Layout";

interface TestArticle {
  _id: string;
  title: string;
  slug: { current: string };
  excerpt?: string;
  coverImage?: any;
  author?: string;
  publishedAt?: string;
  isPremium: boolean;
}

const SanityArticles: React.FC = () => {
  const [articles, setArticles] = useState<TestArticle[]>([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);

  useEffect(() => {
    const query = `*[_type == "article"] | order(publishedAt desc) {
      _id,
      title,
      slug,
      excerpt,
      coverImage,
      author,
      publishedAt,
      isPremium
    }`;

    client
      .fetch(query)
      .then((data) => {
        setArticles(data);
        setLoading(false);
      })
      .catch((err) => {
        setError(err.message);
        setLoading(false);
      });
  }, []);

  if (loading) {
    return (
      <Layout>
        <div className="p-8">
          <p>èª­ã¿è¾¼ã¿ä¸­...</p>
        </div>
      </Layout>
    );
  }

  if (error) {
    return (
      <Layout>
        <div className="p-8">
          <p className="text-red-600">ã‚¨ãƒ©ãƒ¼: {error}</p>
        </div>
      </Layout>
    );
  }

  return (
    <Layout>
      <div className="p-8 max-w-6xl mx-auto">
        <h1 className="text-3xl font-bold mb-8">è¨˜äº‹ä¸€è¦§</h1>

        {articles.length === 0 ? (
          <p>è¨˜äº‹ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>
        ) : (
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            {articles.map((article) => (
              <Link
                key={article._id}
                to={`/sanity-articles/${article.slug.current}`}
                className="border rounded-lg overflow-hidden hover:shadow-lg transition"
              >
                {article.coverImage && (
                  <img
                    src={urlFor(article.coverImage).width(400).height(250).url()}
                    alt={article.title}
                    className="w-full h-48 object-cover"
                  />
                )}
                <div className="p-4">
                  <h2 className="text-xl font-bold mb-2">
                    {article.title}
                    {article.isPremium && <span className="ml-2">ğŸ”’</span>}
                  </h2>
                  {article.excerpt && (
                    <p className="text-gray-600 text-sm mb-2">{article.excerpt}</p>
                  )}
                  {article.author && (
                    <p className="text-gray-500 text-xs">by {article.author}</p>
                  )}
                </div>
              </Link>
            ))}
          </div>
        )}
      </div>
    </Layout>
  );
};

export default SanityArticles;
```

**10-2. è¨˜äº‹è©³ç´°ãƒšãƒ¼ã‚¸ä½œæˆ**

**ä½œæˆãƒ•ã‚¡ã‚¤ãƒ«:** `src/pages/SanityArticleDetail.tsx`

```typescript
import React, { useState, useEffect } from "react";
import { useParams, Link } from "react-router-dom";
import { client, urlFor } from "@/lib/sanity";
import Layout from "@/components/layout/Layout";

interface TestArticle {
  _id: string;
  title: string;
  slug: { current: string };
  excerpt?: string;
  coverImage?: any;
  content: any[];
  author?: string;
  publishedAt?: string;
  tags?: string[];
  relatedLesson?: {
    title: string;
    slug: { current: string };
  };
}

const SanityArticleDetail: React.FC = () => {
  const { slug } = useParams<{ slug: string }>();
  const [article, setArticle] = useState<TestArticle | null>(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);

  useEffect(() => {
    const query = `*[_type == "article" && slug.current == $slug][0] {
      _id,
      title,
      slug,
      excerpt,
      coverImage,
      content,
      author,
      publishedAt,
      tags,
      "relatedLesson": relatedLesson-> {
        title,
        "slug": slug.current
      }
    }`;

    client
      .fetch(query, { slug })
      .then((data) => {
        setArticle(data);
        setLoading(false);
      })
      .catch((err) => {
        setError(err.message);
        setLoading(false);
      });
  }, [slug]);

  if (loading) {
    return (
      <Layout>
        <div className="p-8">
          <p>èª­ã¿è¾¼ã¿ä¸­...</p>
        </div>
      </Layout>
    );
  }

  if (error || !article) {
    return (
      <Layout>
        <div className="p-8">
          <p className="text-red-600">è¨˜äº‹ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ</p>
        </div>
      </Layout>
    );
  }

  return (
    <Layout>
      <article className="max-w-3xl mx-auto p-8">
        {/* ãƒ˜ãƒƒãƒ€ãƒ¼ */}
        <header className="mb-8">
          <h1 className="text-4xl font-bold mb-4">{article.title}</h1>
          {article.excerpt && (
            <p className="text-xl text-gray-600 mb-4">{article.excerpt}</p>
          )}
          <div className="flex items-center gap-4 text-sm text-gray-500">
            {article.author && <span>by {article.author}</span>}
            {article.publishedAt && (
              <span>{new Date(article.publishedAt).toLocaleDateString("ja-JP")}</span>
            )}
          </div>
          {article.tags && article.tags.length > 0 && (
            <div className="flex gap-2 mt-4">
              {article.tags.map((tag) => (
                <span
                  key={tag}
                  className="px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-xs"
                >
                  {tag}
                </span>
              ))}
            </div>
          )}
        </header>

        {/* ã‚«ãƒãƒ¼ç”»åƒ */}
        {article.coverImage && (
          <img
            src={urlFor(article.coverImage).width(800).url()}
            alt={article.title}
            className="w-full rounded-lg mb-8"
          />
        )}

        {/* æœ¬æ–‡ */}
        <div className="prose prose-lg max-w-none">
          {article.content.map((block: any, index: number) => {
            // ç”»åƒãƒ–ãƒ­ãƒƒã‚¯
            if (block._type === "image") {
              return (
                <figure key={index} className="my-8">
                  <img
                    src={urlFor(block).width(800).url()}
                    alt={block.alt || ""}
                    className="w-full rounded"
                  />
                  {block.caption && (
                    <figcaption className="text-sm text-gray-600 mt-2 text-center">
                      {block.caption}
                    </figcaption>
                  )}
                </figure>
              );
            }

            // ãƒ†ã‚­ã‚¹ãƒˆãƒ–ãƒ­ãƒƒã‚¯
            if (block._type === "block") {
              const text = block.children?.map((child: any) => child.text).join("") || "";

              switch (block.style) {
                case "h2":
                  return (
                    <h2 key={index} className="text-3xl font-bold mt-12 mb-4">
                      {text}
                    </h2>
                  );
                case "h3":
                  return (
                    <h3 key={index} className="text-2xl font-bold mt-8 mb-3">
                      {text}
                    </h3>
                  );
                case "blockquote":
                  return (
                    <blockquote key={index} className="border-l-4 border-gray-300 pl-4 italic my-6">
                      {text}
                    </blockquote>
                  );
                default:
                  return (
                    <p key={index} className="mb-4 leading-relaxed text-gray-800">
                      {text}
                    </p>
                  );
              }
            }

            return null;
          })}
        </div>

        {/* é–¢é€£ãƒ¬ãƒƒã‚¹ãƒ³ */}
        {article.relatedLesson && (
          <div className="mt-12 p-6 bg-blue-50 rounded-lg">
            <h2 className="text-xl font-bold mb-3">é–¢é€£ãƒ¬ãƒƒã‚¹ãƒ³</h2>
            <Link
              to={`/sanity-test`}
              className="text-blue-600 hover:underline font-medium"
            >
              {article.relatedLesson.title} â†’
            </Link>
          </div>
        )}

        {/* æˆ»ã‚‹ãƒªãƒ³ã‚¯ */}
        <div className="mt-8">
          <Link to="/sanity-articles" className="text-blue-600 hover:underline">
            â† è¨˜äº‹ä¸€è¦§ã«æˆ»ã‚‹
          </Link>
        </div>
      </article>
    </Layout>
  );
};

export default SanityArticleDetail;
```

**10-3. ãƒ«ãƒ¼ãƒˆè¿½åŠ **

**æ›´æ–°ãƒ•ã‚¡ã‚¤ãƒ«:** `src/App.tsx`

```typescript
import SanityArticles from "./pages/SanityArticles";
import SanityArticleDetail from "./pages/SanityArticleDetail";

// ãƒ«ãƒ¼ãƒˆè¿½åŠ 
<Route path="/sanity-articles" element={<SanityArticles />} />
<Route path="/sanity-articles/:slug" element={<SanityArticleDetail />} />
```

**10-4. ãƒ¬ãƒƒã‚¹ãƒ³ãƒšãƒ¼ã‚¸ã«é–¢é€£è¨˜äº‹è¡¨ç¤ºã‚’è¿½åŠ **

**æ›´æ–°ãƒ•ã‚¡ã‚¤ãƒ«:** `src/pages/SanityTest.tsx`

GROQã‚¯ã‚¨ãƒªã‚’æ›´æ–°ã—ã¦é–¢é€£è¨˜äº‹ã‚‚å–å¾—:

```typescript
const query = `*[_type == "lesson"] {
  _id,
  title,
  slug,
  description,
  coverImage,
  category,
  isPremium,
  "relatedArticles": relatedArticles[]-> {
    title,
    "slug": slug.current,
    excerpt
  }
}`;
```

ãƒ¬ãƒƒã‚¹ãƒ³ã‚«ãƒ¼ãƒ‰å†…ã«é–¢é€£è¨˜äº‹ãƒªãƒ³ã‚¯ã‚’è¿½åŠ :

```tsx
{lesson.relatedArticles && lesson.relatedArticles.length > 0 && (
  <div className="mt-4 pt-4 border-t">
    <p className="text-sm font-medium text-gray-700 mb-2">é–¢é€£è¨˜äº‹:</p>
    {lesson.relatedArticles.map((article: any) => (
      <Link
        key={article.slug}
        to={`/sanity-articles/${article.slug}`}
        className="text-sm text-blue-600 hover:underline block"
      >
        {article.title}
      </Link>
    ))}
  </div>
)}
```

---

### Step 11: æœ€çµ‚å‹•ä½œç¢ºèªã¨Sanityæ¡ç”¨åˆ¤å®š

ã™ã¹ã¦ã®å®Ÿè£…ãŒå®Œäº†ã—ãŸã‚‰ã€ä½“é¨“ã‚’ã‚‚ã¨ã«Sanityæ¡ç”¨ã‚’åˆ¤æ–­ã—ã¾ã™ã€‚

**11-1. å‹•ä½œç¢ºèªãƒ•ãƒ­ãƒ¼**

1. **ãƒ¬ãƒƒã‚¹ãƒ³ä¸€è¦§** (`/sanity-test`)
   - ãƒ¬ãƒƒã‚¹ãƒ³ã‚«ãƒ¼ãƒ‰ãŒè¡¨ç¤ºã•ã‚Œã‚‹
   - é–¢é€£è¨˜äº‹ãƒªãƒ³ã‚¯ãŒè¡¨ç¤ºã•ã‚Œã‚‹

2. **è¨˜äº‹ä¸€è¦§** (`/sanity-articles`)
   - è¨˜äº‹ã‚«ãƒ¼ãƒ‰ãŒè¡¨ç¤ºã•ã‚Œã‚‹
   - ã‚«ãƒãƒ¼ç”»åƒã€è¦ç´„ã€è‘—è€…ãŒè¡¨ç¤ºã•ã‚Œã‚‹

3. **è¨˜äº‹è©³ç´°** (`/sanity-articles/:slug`)
   - é•·æ–‡è¨˜äº‹ãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹
   - è¦‹å‡ºã—éšå±¤ãŒé©åˆ‡
   - ç”»åƒãŒåŸ‹ã‚è¾¼ã¾ã‚Œã¦ã„ã‚‹
   - é–¢é€£ãƒ¬ãƒƒã‚¹ãƒ³ã¸ã®ãƒªãƒ³ã‚¯ãŒæ©Ÿèƒ½ã™ã‚‹

4. **é€£æºç¢ºèª**
   - ãƒ¬ãƒƒã‚¹ãƒ³ â†’ è¨˜äº‹ã¸ã®ãƒªãƒ³ã‚¯
   - è¨˜äº‹ â†’ ãƒ¬ãƒƒã‚¹ãƒ³ã¸ã®ãƒªãƒ³ã‚¯
   - åŒæ–¹å‘ã®è¡Œãæ¥ãŒã‚¹ãƒ ãƒ¼ã‚º

**11-2. åˆ¤å®šãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ**

ä»¥ä¸‹ã®é …ç›®ã‚’å®Ÿéš›ã«ä½“é¨“ã—ã¦è©•ä¾¡ã—ã¦ãã ã•ã„:

#### âœ… æœ€é‡è¦: é•·æ–‡å…¥åŠ›ã®å¿«é©ã•

**Studioã§ã®åŸ·ç­†:**
- [ ] ãƒ–ãƒ­ãƒƒã‚¯ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã¯ä½¿ã„ã‚„ã™ã„ã‹ï¼Ÿ
- [ ] è¦‹å‡ºã—ãƒ»æ®µè½ã®è¿½åŠ ãŒã‚¹ãƒ ãƒ¼ã‚ºã‹ï¼Ÿ
- [ ] ç”»åƒæŒ¿å…¥ãŒç›´æ„Ÿçš„ã‹ï¼Ÿ
- [ ] ãƒªãƒ³ã‚¯è¿½åŠ ãŒç°¡å˜ã‹ï¼Ÿ
- [ ] å…¨ä½“çš„ãªæ›¸ãå¿ƒåœ°ã¯è‰¯ã„ã‹ï¼Ÿ

**Canvasã§ã®åŸ·ç­†ï¼ˆè©¦ã—ãŸå ´åˆï¼‰:**
- [ ] AIã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆï¼ˆGhostwriterï¼‰ã¯å½¹ç«‹ã¤ã‹ï¼Ÿ
- [ ] Notesæ©Ÿèƒ½ã¯ä½¿ã„ã‚„ã™ã„ã‹ï¼Ÿ
- [ ] åŸ·ç­†ã«é›†ä¸­ã§ãã‚‹UIã‹ï¼Ÿ
- [ ] Content Mappingã¯æ­£ç¢ºã‹ï¼Ÿ
- [ ] Studio vs Canvas ã©ã¡ã‚‰ãŒå¥½ã¿ã‹ï¼Ÿ

#### ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰

- [ ] ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—ãŒç°¡å˜ã‹ï¼Ÿ
- [ ] Hotspotè¨­å®šã¯ä¾¿åˆ©ã‹ï¼Ÿ
- [ ] ç”»åƒç®¡ç†ã¯ç›´æ„Ÿçš„ã‹ï¼Ÿ
- [ ] CDNé…ä¿¡ã¯é€Ÿã„ã‹ï¼Ÿ

#### ãƒ¬ãƒƒã‚¹ãƒ³ã¨è¨˜äº‹ã®é–¢é€£ä»˜ã‘

- [ ] reference fieldã®è¨­å®šã¯ç°¡å˜ã‹ï¼Ÿ
- [ ] é–¢é€£ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®é¸æŠã¯ç›´æ„Ÿçš„ã‹ï¼Ÿ
- [ ] ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§ã®è¡¨ç¤ºã¯è‡ªç„¶ã‹ï¼Ÿ
- [ ] ãƒ‡ãƒ¼ã‚¿ã®æ•´åˆæ€§ã¯ä¿ãŸã‚Œã¦ã„ã‚‹ã‹ï¼Ÿ

#### å…¨ä½“çš„ãªé–‹ç™ºä½“é¨“

- [ ] GROQã‚¯ã‚¨ãƒªã¯æ›¸ãã‚„ã™ã„ã‹ï¼Ÿ
- [ ] ãƒ‡ãƒ¼ã‚¿å–å¾—ã¯é€Ÿã„ã‹ï¼Ÿ
- [ ] ã‚¹ã‚­ãƒ¼ãƒå®šç¾©ã¯ç†è§£ã—ã‚„ã™ã„ã‹ï¼Ÿ
- [ ] Studioã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã¯æŸ”è»Ÿã‹ï¼Ÿ
- [ ] ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯å……å®Ÿã—ã¦ã„ã‚‹ã‹ï¼Ÿ

**11-3. æœ€çµ‚åˆ¤æ–­**

**âœ… Sanityæ¡ç”¨ï¼ˆPhase 1-Bã¸é€²ã‚€ï¼‰** ã®æ¡ä»¶:
- é•·æ–‡åŸ·ç­†ãŒå¿«é©
- ç”»åƒç®¡ç†ãŒç°¡å˜
- é–¢é€£ä»˜ã‘ãŒç›´æ„Ÿçš„
- å…¨ä½“çš„ãªé–‹ç™ºä½“é¨“ãŒè‰¯å¥½

**ğŸ¤” ã‚‚ã†å°‘ã—æ¤œè¨** ã®æ¡ä»¶:
- ä¸€éƒ¨ã«ä¸æº€ãŒã‚ã‚‹ãŒã€è¨±å®¹ç¯„å›²
- åˆ¥ã®CMSã¨æ¯”è¼ƒã—ãŸã„
- è¿½åŠ æ©Ÿèƒ½ã‚’è©¦ã—ãŸã„

**âŒ Sanityä¸æ¡ç”¨** ã®æ¡ä»¶:
- é•·æ–‡åŸ·ç­†ãŒä¸ä¾¿
- å­¦ç¿’ã‚³ã‚¹ãƒˆãŒé«˜ã™ãã‚‹
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã«å•é¡Œ
- åˆ¥ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒï¼ˆMDXç­‰ï¼‰ã®æ–¹ãŒè‰¯ã•ãã†

---

### Phase 1-A å®Œäº†ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆï¼ˆæ‹¡å¼µç‰ˆï¼‰

#### åŸºæœ¬æ©Ÿèƒ½
- [x] Sanity CLI ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆã§ããŸ
- [x] Sanity Studioï¼ˆ`http://localhost:3333`ï¼‰ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ããŸ
- [x] lesson ã‚¹ã‚­ãƒ¼ãƒã§ãƒ‡ãƒ¼ã‚¿ã‚’è¿½åŠ ãƒ»ç·¨é›†ã§ããŸ
- [x] ç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã§ããŸ
- [x] CORSè¨­å®šãŒå®Œäº†ã—ã€ãƒ‡ãƒ¼ã‚¿å–å¾—ãŒã§ããŸ

#### è¨˜äº‹æ©Ÿèƒ½ï¼ˆæ–°è¦è¿½åŠ ï¼‰
- [ ] article ã‚¹ã‚­ãƒ¼ãƒã‚’ä½œæˆã—ãŸ
- [ ] Studioã§é•·æ–‡è¨˜äº‹ã‚’ä½œæˆã—ãŸ
- [ ] Canvasé€£æºã‚’è¨­å®šã—ãŸï¼ˆdeployå®Œäº†ï¼‰
- [ ] Canvas ã§è¨˜äº‹åŸ·ç­†ã‚’è©¦ã—ãŸï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
- [ ] è¨˜äº‹ã«ç”»åƒã‚’è¤‡æ•°æŒ¿å…¥ã—ãŸ
- [ ] è¦‹å‡ºã—ãƒ»æ®µè½ãƒ»ãƒªãƒ³ã‚¯ã‚’è©¦ã—ãŸ

#### é€£æºæ©Ÿèƒ½
- [ ] ãƒ¬ãƒƒã‚¹ãƒ³ã«é–¢é€£è¨˜äº‹ã‚’è¨­å®šã—ãŸ
- [ ] è¨˜äº‹ã«é–¢é€£ãƒ¬ãƒƒã‚¹ãƒ³ã‚’è¨­å®šã—ãŸ
- [ ] ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§ãƒ¬ãƒƒã‚¹ãƒ³ä¸€è¦§ã‚’è¡¨ç¤ºã—ãŸ
- [ ] ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§è¨˜äº‹ä¸€è¦§ã‚’è¡¨ç¤ºã—ãŸ
- [ ] è¨˜äº‹è©³ç´°ãƒšãƒ¼ã‚¸ã§é•·æ–‡ãŒæ­£ã—ãè¡¨ç¤ºã•ã‚ŒãŸ
- [ ] ãƒ¬ãƒƒã‚¹ãƒ³â†”è¨˜äº‹ã®ç›¸äº’ãƒªãƒ³ã‚¯ãŒæ©Ÿèƒ½ã—ãŸ

#### åˆ¤å®š
- [ ] é•·æ–‡åŸ·ç­†ã®å¿«é©ã•ã‚’ç¢ºèªã—ãŸ
- [ ] ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã®ç°¡å˜ã•ã‚’ç¢ºèªã—ãŸ
- [ ] é–¢é€£ä»˜ã‘ã®ç›´æ„Ÿæ€§ã‚’ç¢ºèªã—ãŸ
- [ ] Sanityæ¡ç”¨å¯å¦ã‚’æ±ºå®šã—ãŸ

**âœ… ã™ã¹ã¦å®Œäº†ã—ãŸã‚‰ã€Sanityæ¡ç”¨åˆ¤å®šãŒå®Œäº†ã§ã™ï¼**

---

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

## ğŸš€ Phase 1-B: æœ¬å®Ÿè£…ï¼ˆSanity ã§æœ¬æ ¼çš„ã«æ§‹ç¯‰ï¼‰

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Phase 1-A ã§ä½“é¨“ã—ã¦ã€Sanity ã§é€²ã‚ã‚‹ã“ã¨ãŒæ±ºã¾ã£ãŸã‚‰ã€ä»¥ä¸‹ã®æœ¬å®Ÿè£…ã«å…¥ã‚Šã¾ã™ã€‚

### å®Ÿè£…ã‚¹ãƒ†ãƒƒãƒ—

#### Step 1: Sanity ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

**1-1. Sanity ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆã¨ CLI ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**

```bash
# Sanity CLIã‚’ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install -g @sanity/cli

# Sanityã«ãƒ­ã‚°ã‚¤ãƒ³ï¼ˆãƒ–ãƒ©ã‚¦ã‚¶ãŒé–‹ãï¼‰
sanity login

# æ–°è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
sanity init
```

**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆæ™‚ã®é¸æŠ:**

- Project name: `bono-training-cms`
- Dataset: `production`
- Project template: `Clean project with no predefined schemas`
- Package manager: `npm`

**1-2. Sanity ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ**

ä½œæˆã•ã‚Œã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ :

```
sanity-studio/
â”œâ”€â”€ schemas/
â”‚   â”œâ”€â”€ index.ts           # ã‚¹ã‚­ãƒ¼ãƒçµ±åˆ
â”‚   â”œâ”€â”€ lesson.ts          # ãƒ¬ãƒƒã‚¹ãƒ³ã‚¹ã‚­ãƒ¼ãƒ
â”‚   â”œâ”€â”€ quest.ts           # ã‚¯ã‚¨ã‚¹ãƒˆã‚¹ã‚­ãƒ¼ãƒ
â”‚   â”œâ”€â”€ content.ts         # ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¹ã‚­ãƒ¼ãƒ
â”‚   â”œâ”€â”€ category.ts        # ã‚«ãƒ†ã‚´ãƒªã‚¹ã‚­ãƒ¼ãƒ
â”‚   â””â”€â”€ roadmap.ts         # ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—ã‚¹ã‚­ãƒ¼ãƒ
â”œâ”€â”€ sanity.config.ts       # Sanityè¨­å®š
â””â”€â”€ package.json
```

**1-3. Sanity ä¾å­˜é–¢ä¿‚ã‚’ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«è¿½åŠ **

```bash
# ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ«ãƒ¼ãƒˆã§å®Ÿè¡Œ
npm install @sanity/client @sanity/image-url
npm install -D @sanity/types
```

---

#### Step 2: Sanity ã‚¹ã‚­ãƒ¼ãƒå®šç¾©

ã™ã¹ã¦ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¿ã‚¤ãƒ—ã®ã‚¹ã‚­ãƒ¼ãƒã‚’å®šç¾©ã—ã¾ã™ã€‚

**2-1. Categoryï¼ˆã‚«ãƒ†ã‚´ãƒªï¼‰ã‚¹ã‚­ãƒ¼ãƒ**

**ä½œæˆãƒ•ã‚¡ã‚¤ãƒ«:** `sanity-studio/schemas/category.ts`

```typescript
import { defineType, defineField } from "sanity";

export default defineType({
  name: "category",
  title: "ã‚«ãƒ†ã‚´ãƒª",
  type: "document",
  fields: [
    defineField({
      name: "name",
      title: "ã‚«ãƒ†ã‚´ãƒªå",
      type: "string",
      validation: (Rule) => Rule.required(),
    }),
    defineField({
      name: "slug",
      title: "ã‚¹ãƒ©ãƒƒã‚°",
      type: "slug",
      options: {
        source: "name",
        maxLength: 96,
      },
      validation: (Rule) => Rule.required(),
    }),
    defineField({
      name: "description",
      title: "èª¬æ˜",
      type: "text",
    }),
  ],
});
```

---

**2-2. Roadmapï¼ˆãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—ï¼‰ã‚¹ã‚­ãƒ¼ãƒ**

**ä½œæˆãƒ•ã‚¡ã‚¤ãƒ«:** `sanity-studio/schemas/roadmap.ts`

```typescript
import { defineType, defineField } from "sanity";

export default defineType({
  name: "roadmap",
  title: "ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—",
  type: "document",
  fields: [
    defineField({
      name: "name",
      title: "ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—å",
      type: "string",
      validation: (Rule) => Rule.required(),
    }),
    defineField({
      name: "slug",
      title: "ã‚¹ãƒ©ãƒƒã‚°",
      type: "slug",
      options: {
        source: "name",
      },
      validation: (Rule) => Rule.required(),
    }),
    defineField({
      name: "level",
      title: "ãƒ¬ãƒ™ãƒ«",
      type: "string",
      description: "ä¾‹: Lv0, Lv1, Lv2...",
    }),
    defineField({
      name: "description",
      title: "èª¬æ˜",
      type: "text",
    }),
  ],
});
```

---

**2-3. Contentï¼ˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ï¼‰ã‚¹ã‚­ãƒ¼ãƒ**

**ä½œæˆãƒ•ã‚¡ã‚¤ãƒ«:** `sanity-studio/schemas/content.ts`

```typescript
import { defineType, defineField } from "sanity";

export default defineType({
  name: "content",
  title: "ã‚³ãƒ³ãƒ†ãƒ³ãƒ„",
  type: "document",
  fields: [
    defineField({
      name: "title",
      title: "ã‚¿ã‚¤ãƒˆãƒ«",
      type: "string",
      validation: (Rule) => Rule.required(),
    }),
    defineField({
      name: "slug",
      title: "ã‚¹ãƒ©ãƒƒã‚°",
      type: "slug",
      options: {
        source: "title",
      },
      validation: (Rule) => Rule.required(),
    }),
    defineField({
      name: "type",
      title: "ç¨®åˆ¥",
      type: "string",
      options: {
        list: [
          { title: "å‹•ç”»", value: "video" },
          { title: "è¨˜äº‹", value: "article" },
        ],
        layout: "radio",
      },
      validation: (Rule) => Rule.required(),
    }),
    defineField({
      name: "vimeoUrl",
      title: "Vimeo URL",
      type: "url",
      description: "ä¾‹: https://vimeo.com/123456789",
      hidden: ({ document }) => document?.type !== "video",
      validation: (Rule) =>
        Rule.custom((value, context) => {
          const type = (context.document as any)?.type;
          if (type === "video" && !value) {
            return "å‹•ç”»ã®å ´åˆã¯Vimeo URLãŒå¿…é ˆã§ã™";
          }
          return true;
        }),
    }),
    defineField({
      name: "articleBody",
      title: "è¨˜äº‹æœ¬æ–‡",
      type: "array",
      of: [
        {
          type: "block",
          styles: [
            { title: "Normal", value: "normal" },
            { title: "H2", value: "h2" },
            { title: "H3", value: "h3" },
            { title: "Quote", value: "blockquote" },
          ],
          marks: {
            decorators: [
              { title: "Strong", value: "strong" },
              { title: "Emphasis", value: "em" },
              { title: "Code", value: "code" },
            ],
            annotations: [
              {
                title: "URL",
                name: "link",
                type: "object",
                fields: [
                  {
                    title: "URL",
                    name: "href",
                    type: "url",
                  },
                ],
              },
            ],
          },
        },
        {
          type: "image",
          options: { hotspot: true },
        },
      ],
      hidden: ({ document }) => document?.type !== "article",
    }),
    defineField({
      name: "estTimeMins",
      title: "æ‰€è¦æ™‚é–“ï¼ˆåˆ†ï¼‰",
      type: "number",
      validation: (Rule) => Rule.min(1).max(180),
    }),
    defineField({
      name: "isRequired",
      title: "å¿…é ˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„",
      type: "boolean",
      description: "ã‚¯ã‚¨ã‚¹ãƒˆå®Œäº†ã«å¿…é ˆã‹ã©ã†ã‹",
      initialValue: true,
    }),
    defineField({
      name: "isPremium",
      title: "æœ‰æ–™ã‚³ãƒ³ãƒ†ãƒ³ãƒ„",
      type: "boolean",
      description: "ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ä¼šå“¡é™å®š",
      initialValue: false,
    }),
  ],
  preview: {
    select: {
      title: "title",
      type: "type",
      isPremium: "isPremium",
    },
    prepare({ title, type, isPremium }) {
      return {
        title,
        subtitle: `${type === "video" ? "ğŸ¬ å‹•ç”»" : "ğŸ“„ è¨˜äº‹"}${
          isPremium ? " ğŸ”’ æœ‰æ–™" : ""
        }`,
      };
    },
  },
});
```

---

**2-4. Questï¼ˆã‚¯ã‚¨ã‚¹ãƒˆï¼‰ã‚¹ã‚­ãƒ¼ãƒ**

**ä½œæˆãƒ•ã‚¡ã‚¤ãƒ«:** `sanity-studio/schemas/quest.ts`

```typescript
import { defineType, defineField } from "sanity";

export default defineType({
  name: "quest",
  title: "ã‚¯ã‚¨ã‚¹ãƒˆ",
  type: "document",
  fields: [
    defineField({
      name: "title",
      title: "ã‚¿ã‚¤ãƒˆãƒ«",
      type: "string",
      validation: (Rule) => Rule.required(),
    }),
    defineField({
      name: "slug",
      title: "ã‚¹ãƒ©ãƒƒã‚°",
      type: "slug",
      options: {
        source: "title",
      },
      validation: (Rule) => Rule.required(),
    }),
    defineField({
      name: "goal",
      title: "ã‚´ãƒ¼ãƒ«",
      type: "text",
      description: "ã“ã®ã‚¯ã‚¨ã‚¹ãƒˆã§é”æˆã™ã‚‹ç›®æ¨™",
      validation: (Rule) => Rule.required(),
    }),
    defineField({
      name: "estTimeMins",
      title: "æ‰€è¦æ™‚é–“ï¼ˆåˆ†ï¼‰",
      type: "number",
      description: "ã‚¯ã‚¨ã‚¹ãƒˆå…¨ä½“ã®æ‰€è¦æ™‚é–“",
      validation: (Rule) => Rule.min(1).max(300),
    }),
    defineField({
      name: "contents",
      title: "ã‚³ãƒ³ãƒ†ãƒ³ãƒ„",
      type: "array",
      of: [{ type: "reference", to: [{ type: "content" }] }],
      validation: (Rule) => Rule.required().min(1),
    }),
  ],
  preview: {
    select: {
      title: "title",
      goal: "goal",
      estTimeMins: "estTimeMins",
    },
    prepare({ title, goal, estTimeMins }) {
      return {
        title,
        subtitle: `${goal} (${estTimeMins}åˆ†)`,
      };
    },
  },
});
```

---

**2-5. Lessonï¼ˆãƒ¬ãƒƒã‚¹ãƒ³ï¼‰ã‚¹ã‚­ãƒ¼ãƒ**

**ä½œæˆãƒ•ã‚¡ã‚¤ãƒ«:** `sanity-studio/schemas/lesson.ts`

```typescript
import { defineType, defineField } from "sanity";

export default defineType({
  name: "lesson",
  title: "ãƒ¬ãƒƒã‚¹ãƒ³",
  type: "document",
  fields: [
    defineField({
      name: "title",
      title: "ã‚¿ã‚¤ãƒˆãƒ«",
      type: "string",
      validation: (Rule) => Rule.required(),
    }),
    defineField({
      name: "slug",
      title: "ã‚¹ãƒ©ãƒƒã‚°",
      type: "slug",
      options: {
        source: "title",
      },
      validation: (Rule) => Rule.required(),
    }),
    defineField({
      name: "description",
      title: "çŸ­ã„èª¬æ˜",
      type: "text",
      description: "ãƒ¬ãƒƒã‚¹ãƒ³ã‚«ãƒ¼ãƒ‰ã«è¡¨ç¤ºã•ã‚Œã‚‹èª¬æ˜æ–‡",
      validation: (Rule) => Rule.required().max(200),
    }),
    defineField({
      name: "coverImage",
      title: "ã‚«ãƒãƒ¼ç”»åƒ",
      type: "image",
      description: "ãƒ¬ãƒƒã‚¹ãƒ³ä¸€è¦§ã§è¡¨ç¤ºã•ã‚Œã‚‹ç”»åƒï¼ˆ342x512pxæ¨å¥¨ï¼‰",
      options: {
        hotspot: true,
      },
      validation: (Rule) => Rule.required(),
    }),
    defineField({
      name: "icon",
      title: "ã‚¢ã‚¤ã‚³ãƒ³",
      type: "image",
      description: "ãƒ¬ãƒƒã‚¹ãƒ³è©³ç´°ã§è¡¨ç¤ºã•ã‚Œã‚‹ã‚¢ã‚¤ã‚³ãƒ³ï¼ˆ240x240pxæ¨å¥¨ï¼‰",
      options: {
        hotspot: true,
      },
      validation: (Rule) => Rule.required(),
    }),
    defineField({
      name: "backgroundSvg",
      title: "èƒŒæ™¯SVG",
      type: "image",
      description: "ãƒ’ãƒ¼ãƒ­ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®èƒŒæ™¯è£…é£¾ï¼ˆSVGæ¨å¥¨ï¼‰",
      options: {
        accept: "image/svg+xml",
      },
    }),
    defineField({
      name: "categories",
      title: "ã‚«ãƒ†ã‚´ãƒª",
      type: "array",
      of: [{ type: "reference", to: [{ type: "category" }] }],
      validation: (Rule) => Rule.required().min(1),
    }),
    defineField({
      name: "roadmap",
      title: "ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—",
      type: "reference",
      to: [{ type: "roadmap" }],
    }),
    defineField({
      name: "overview",
      title: "æ¦‚è¦",
      type: "array",
      of: [{ type: "block" }],
      description: "ãƒ¬ãƒƒã‚¹ãƒ³ã®è©³ç´°èª¬æ˜",
    }),
    defineField({
      name: "objectives",
      title: "å­¦ç¿’ç›®æ¨™",
      type: "array",
      of: [{ type: "string" }],
      validation: (Rule) => Rule.required().min(1).max(10),
    }),
    defineField({
      name: "quests",
      title: "ã‚¯ã‚¨ã‚¹ãƒˆ",
      type: "array",
      of: [{ type: "reference", to: [{ type: "quest" }] }],
      validation: (Rule) => Rule.required().min(1),
    }),
    defineField({
      name: "isPremium",
      title: "æœ‰æ–™ãƒ¬ãƒƒã‚¹ãƒ³",
      type: "boolean",
      description: "ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ä¼šå“¡é™å®š",
      initialValue: false,
    }),
    defineField({
      name: "isPublished",
      title: "å…¬é–‹",
      type: "boolean",
      description: "å…¬é–‹çŠ¶æ…‹",
      initialValue: false,
    }),
  ],
  preview: {
    select: {
      title: "title",
      media: "coverImage",
      isPremium: "isPremium",
      isPublished: "isPublished",
    },
    prepare({ title, media, isPremium, isPublished }) {
      return {
        title,
        media,
        subtitle: `${isPublished ? "âœ… å…¬é–‹" : "ğŸ“ ä¸‹æ›¸ã"}${
          isPremium ? " ğŸ”’ æœ‰æ–™" : ""
        }`,
      };
    },
  },
});
```

---

**2-6. ã‚¹ã‚­ãƒ¼ãƒçµ±åˆ**

**ä½œæˆãƒ•ã‚¡ã‚¤ãƒ«:** `sanity-studio/schemas/index.ts`

```typescript
import category from "./category";
import roadmap from "./roadmap";
import content from "./content";
import quest from "./quest";
import lesson from "./lesson";

export const schemaTypes = [
  // åŸºæœ¬ãƒ‡ãƒ¼ã‚¿
  category,
  roadmap,

  // ã‚³ãƒ³ãƒ†ãƒ³ãƒ„éšå±¤
  content,
  quest,
  lesson,
];
```

---

#### Step 3: Sanity Studio è¨­å®šã¨ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

**3-1. Sanity è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«**

**æ›´æ–°ãƒ•ã‚¡ã‚¤ãƒ«:** `sanity-studio/sanity.config.ts`

```typescript
import { defineConfig } from "sanity";
import { deskTool } from "sanity/desk";
import { visionTool } from "@sanity/vision";
import { schemaTypes } from "./schemas";

export default defineConfig({
  name: "default",
  title: "Bono Training CMS",

  projectId: "YOUR_PROJECT_ID", // sanity initã§ç”Ÿæˆã•ã‚ŒãŸID
  dataset: "production",

  plugins: [
    deskTool({
      structure: (S) =>
        S.list()
          .title("ã‚³ãƒ³ãƒ†ãƒ³ãƒ„")
          .items([
            S.listItem()
              .title("ãƒ¬ãƒƒã‚¹ãƒ³")
              .child(S.documentTypeList("lesson").title("ãƒ¬ãƒƒã‚¹ãƒ³")),
            S.listItem()
              .title("ã‚¯ã‚¨ã‚¹ãƒˆ")
              .child(S.documentTypeList("quest").title("ã‚¯ã‚¨ã‚¹ãƒˆ")),
            S.listItem()
              .title("ã‚³ãƒ³ãƒ†ãƒ³ãƒ„")
              .child(S.documentTypeList("content").title("ã‚³ãƒ³ãƒ†ãƒ³ãƒ„")),
            S.divider(),
            S.listItem()
              .title("ã‚«ãƒ†ã‚´ãƒª")
              .child(S.documentTypeList("category").title("ã‚«ãƒ†ã‚´ãƒª")),
            S.listItem()
              .title("ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—")
              .child(S.documentTypeList("roadmap").title("ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—")),
          ]),
    }),
    visionTool(), // GROQã‚¯ã‚¨ãƒªãƒ†ã‚¹ãƒˆç”¨
  ],

  schema: {
    types: schemaTypes,
  },
});
```

**3-2. Studio èµ·å‹•**

```bash
cd sanity-studio
npm run dev
```

ãƒ–ãƒ©ã‚¦ã‚¶ã§ `http://localhost:3333` ã‚’é–‹ã â†’ Sanity Studio ç®¡ç†ç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã‚‹

---

#### Step 4: ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ä½œæˆ

Sanity Studio ã‚’ä½¿ã£ã¦ã€ã‚µãƒ³ãƒ—ãƒ«ãƒ¬ãƒƒã‚¹ãƒ³ã‚’ä½œæˆã—ã¾ã™ã€‚

**æ‰‹é †:**

1. **ã‚«ãƒ†ã‚´ãƒªä½œæˆ**

   - ã€Œã‚«ãƒ†ã‚´ãƒªã€â†’ã€Œæ–°è¦ä½œæˆã€
   - åå‰: `æƒ…å ±è¨­è¨ˆ`ã€ã‚¹ãƒ©ãƒƒã‚°: `information-architecture`

2. **ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—ä½œæˆ**

   - ã€Œãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—ã€â†’ã€Œæ–°è¦ä½œæˆã€
   - åå‰: `UIåŸºç¤ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—`ã€ã‚¹ãƒ©ãƒƒã‚°: `ui-foundations`ã€ãƒ¬ãƒ™ãƒ«: `Lv0`

3. **ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ä½œæˆï¼ˆ3 ã¤ï¼‰**

   - ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ 1: å‹•ç”»

     - ã‚¿ã‚¤ãƒˆãƒ«: `æƒ…å ±è¨­è¨ˆã¨ã¯ä½•ã‹ï¼Ÿ`
     - ç¨®åˆ¥: `å‹•ç”»`
     - Vimeo URL: `https://vimeo.com/123456789`ï¼ˆå®Ÿéš›ã® URL ã«ç½®ãæ›ãˆï¼‰
     - æ‰€è¦æ™‚é–“: `8`
     - å¿…é ˆ: `true`
     - æœ‰æ–™: `false`

   - ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ 2: è¨˜äº‹

     - ã‚¿ã‚¤ãƒˆãƒ«: `4ã¤ã®åŸºæœ¬åŸå‰‡ã‚’ç†è§£ã™ã‚‹`
     - ç¨®åˆ¥: `è¨˜äº‹`
     - è¨˜äº‹æœ¬æ–‡: é©å½“ãªãƒ†ã‚­ã‚¹ãƒˆã‚’å…¥åŠ›
     - æ‰€è¦æ™‚é–“: `10`

   - ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ 3: å‹•ç”»
     - ã‚¿ã‚¤ãƒˆãƒ«: `å®Ÿä¾‹ã§è¦‹ã‚‹æƒ…å ±è¨­è¨ˆ`
     - ç¨®åˆ¥: `å‹•ç”»`
     - Vimeo URL: å…¥åŠ›
     - æ‰€è¦æ™‚é–“: `7`

4. **ã‚¯ã‚¨ã‚¹ãƒˆä½œæˆ**

   - ã‚¿ã‚¤ãƒˆãƒ«: `æƒ…å ±è¨­è¨ˆã®åŸºæœ¬åŸå‰‡`
   - ã‚´ãƒ¼ãƒ«: `æƒ…å ±è¨­è¨ˆã®4ã¤ã®åŸºæœ¬åŸå‰‡ã‚’ç†è§£ã™ã‚‹`
   - æ‰€è¦æ™‚é–“: `25`
   - ã‚³ãƒ³ãƒ†ãƒ³ãƒ„: ä¸Šè¨˜ 3 ã¤ã‚’é¸æŠ

5. **ãƒ¬ãƒƒã‚¹ãƒ³ä½œæˆ**
   - ã‚¿ã‚¤ãƒˆãƒ«: `ã‚¼ãƒ­ã‹ã‚‰ã¯ã˜ã‚ã‚‹UIæƒ…å ±è¨­è¨ˆ`
   - èª¬æ˜: `ã€Œã©ã“ã«ä½•ã‚’ãªãœç½®ãã¹ãã‹ï¼Ÿã€ã®æƒ…å ±è¨­è¨ˆåŸºç¤ã‚’ãƒˆãƒ¬ãƒ¼ã‚¹ã—ãªãŒã‚‰èº«ã«ã¤ã‘ã‚‰ã‚Œã¾ã™ã€‚å¿…é ˆ!`
   - ã‚«ãƒãƒ¼ç”»åƒ: ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
   - ã‚¢ã‚¤ã‚³ãƒ³: ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
   - ã‚«ãƒ†ã‚´ãƒª: `æƒ…å ±è¨­è¨ˆ`ã‚’é¸æŠ
   - ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—: `UIåŸºç¤ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—`ã‚’é¸æŠ
   - å­¦ç¿’ç›®æ¨™: 3 ã¤è¿½åŠ 
   - ã‚¯ã‚¨ã‚¹ãƒˆ: ä¸Šè¨˜ã‚¯ã‚¨ã‚¹ãƒˆã‚’é¸æŠ
   - å…¬é–‹: `true`

---

#### Step 5: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ - Sanity Client è¨­å®š

**5-1. ç’°å¢ƒå¤‰æ•°è¨­å®š**

**ä½œæˆãƒ•ã‚¡ã‚¤ãƒ«:** `.env.local`

```bash
VITE_SANITY_PROJECT_ID=your_project_id
VITE_SANITY_DATASET=production
VITE_SANITY_API_VERSION=2024-01-01
```

**5-2. Sanity Client ä½œæˆ**

**ä½œæˆãƒ•ã‚¡ã‚¤ãƒ«:** `src/lib/sanity.ts`

```typescript
import { createClient } from "@sanity/client";
import imageUrlBuilder from "@sanity/image-url";
import type { SanityImageSource } from "@sanity/image-url/lib/types/types";

export const client = createClient({
  projectId: import.meta.env.VITE_SANITY_PROJECT_ID,
  dataset: import.meta.env.VITE_SANITY_DATASET,
  apiVersion: import.meta.env.VITE_SANITY_API_VERSION || "2024-01-01",
  useCdn: true, // æœ¬ç•ªç’°å¢ƒã§ã¯trueã€é–‹ç™ºæ™‚ã¯falseæ¨å¥¨
});

// ç”»åƒURLç”Ÿæˆç”¨ãƒ“ãƒ«ãƒ€ãƒ¼
const builder = imageUrlBuilder(client);

export function urlFor(source: SanityImageSource) {
  return builder.image(source);
}
```

**5-3. GROQ ã‚¯ã‚¨ãƒªå®šç¾©**

**ä½œæˆãƒ•ã‚¡ã‚¤ãƒ«:** `src/lib/queries.ts`

```typescript
// ãƒ¬ãƒƒã‚¹ãƒ³ä¸€è¦§å–å¾—
export const LESSONS_QUERY = `
  *[_type == "lesson" && isPublished == true] | order(_createdAt desc) {
    _id,
    title,
    "slug": slug.current,
    description,
    coverImage,
    "category": categories[0]->name,
    isPremium
  }
`;

// ãƒ¬ãƒƒã‚¹ãƒ³è©³ç´°å–å¾—ï¼ˆslugæŒ‡å®šï¼‰
export const LESSON_DETAIL_QUERY = `
  *[_type == "lesson" && slug.current == $slug][0] {
    _id,
    title,
    "slug": slug.current,
    description,
    coverImage,
    icon,
    backgroundSvg,
    "categories": categories[]-> {
      "slug": slug.current,
      name
    },
    "roadmap": roadmap-> {
      "slug": slug.current,
      name,
      level
    },
    overview,
    objectives,
    "quests": quests[]-> {
      "slug": slug.current,
      title,
      goal,
      estTimeMins,
      "contents": contents[]-> {
        "slug": slug.current,
        type,
        title,
        estTimeMins,
        isRequired,
        isPremium,
        vimeoUrl,
        articleBody
      }
    },
    isPremium,
    isPublished
  }
`;
```

**5-4. ãƒ‡ãƒ¼ã‚¿å–å¾—ãƒ•ãƒƒã‚¯ä½œæˆ**

**ä½œæˆãƒ•ã‚¡ã‚¤ãƒ«:** `src/hooks/useLessons.ts`

```typescript
import { useState, useEffect } from "react";
import { client } from "@/lib/sanity";
import { LESSONS_QUERY, LESSON_DETAIL_QUERY } from "@/lib/queries";
import type { Lesson } from "@/types/lesson";

export function useLessons() {
  const [lessons, setLessons] = useState<Lesson[]>([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<Error | null>(null);

  useEffect(() => {
    client
      .fetch(LESSONS_QUERY)
      .then((data) => {
        setLessons(data);
        setLoading(false);
      })
      .catch((err) => {
        setError(err);
        setLoading(false);
      });
  }, []);

  return { lessons, loading, error };
}

export function useLesson(slug: string) {
  const [lesson, setLesson] = useState<Lesson | null>(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<Error | null>(null);

  useEffect(() => {
    if (!slug) return;

    client
      .fetch(LESSON_DETAIL_QUERY, { slug })
      .then((data) => {
        setLesson(data);
        setLoading(false);
      })
      .catch((err) => {
        setError(err);
        setLoading(false);
      });
  }, [slug]);

  return { lesson, loading, error };
}
```

---

#### Step 6: TypeScript å‹å®šç¾©ï¼ˆSanity å¯¾å¿œï¼‰

**æ›´æ–°ãƒ•ã‚¡ã‚¤ãƒ«:** `src/types/lesson.ts`

```typescript
// Sanityç”»åƒå‹
export interface SanityImage {
  _type: "image";
  asset: {
    _ref: string;
    _type: "reference";
  };
  hotspot?: {
    x: number;
    y: number;
    height: number;
    width: number;
  };
}

// Sanityãƒ–ãƒ­ãƒƒã‚¯ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å‹
export interface SanityBlock {
  _type: "block";
  style: string;
  children: Array<{
    _type: "span";
    text: string;
    marks?: string[];
  }>;
}

// ã‚«ãƒ†ã‚´ãƒªå‚ç…§
export interface CategoryRef {
  slug: string;
  name: string;
}

// ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—å‚ç…§
export interface RoadmapRef {
  slug: string;
  name: string;
  level?: string;
}

// ã‚³ãƒ³ãƒ†ãƒ³ãƒ„å‹
export type ContentType = "video" | "article";

// ã‚³ãƒ³ãƒ†ãƒ³ãƒ„
export interface Content {
  slug: string;
  type: ContentType;
  title: string;
  estTimeMins?: number;
  isRequired: boolean;
  isPremium: boolean;
  vimeoUrl?: string;
  articleBody?: SanityBlock[];
}

// ã‚¯ã‚¨ã‚¹ãƒˆ
export interface Quest {
  slug: string;
  title: string;
  goal: string;
  estTimeMins?: number;
  contents: Content[];
}

// ãƒ¬ãƒƒã‚¹ãƒ³
export interface Lesson {
  _id: string;
  slug: string;
  title: string;
  description: string;

  // ç”»åƒ
  coverImage: SanityImage;
  icon: SanityImage;
  backgroundSvg?: SanityImage;

  // ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  categories: CategoryRef[];
  roadmap?: RoadmapRef;

  // ã‚³ãƒ³ãƒ†ãƒ³ãƒ„
  overview?: SanityBlock[];
  objectives: string[];
  quests: Quest[];

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  isPremium: boolean;
  isPublished: boolean;

  // ä¸€è¦§ãƒšãƒ¼ã‚¸ç”¨ï¼ˆå¾Œæ–¹äº’æ›ï¼‰
  category?: string;
}
```

---

#### Step 7: å…±é€š UI ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ä½œæˆ

**7-1. Pill ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**

**ä½œæˆãƒ•ã‚¡ã‚¤ãƒ«:** `src/components/common/Pill.tsx`

```typescript
import React from "react";
import { cn } from "@/lib/utils";

interface PillProps {
  text: string;
  variant?: "category" | "roadmap";
  className?: string;
}

const Pill: React.FC<PillProps> = ({
  text,
  variant = "category",
  className,
}) => {
  const variantStyles = {
    category: "bg-blue-100 text-blue-700",
    roadmap: "bg-purple-100 text-purple-700",
  };

  return (
    <span
      className={cn(
        "inline-flex items-center px-3 py-1 rounded-full text-xs font-medium",
        variantStyles[variant],
        className
      )}
    >
      {text}
    </span>
  );
};

export default Pill;
```

**7-2. Badge ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**

**ä½œæˆãƒ•ã‚¡ã‚¤ãƒ«:** `src/components/common/Badge.tsx`

```typescript
import React from "react";
import { cn } from "@/lib/utils";

interface BadgeProps {
  text: string;
  variant?: "required" | "premium" | "optional";
  className?: string;
}

const Badge: React.FC<BadgeProps> = ({
  text,
  variant = "required",
  className,
}) => {
  const variantStyles = {
    required: "bg-red-100 text-red-700",
    premium: "bg-amber-100 text-amber-700",
    optional: "bg-gray-100 text-gray-600",
  };

  return (
    <span
      className={cn(
        "inline-flex items-center px-2 py-0.5 rounded text-xs font-medium",
        variantStyles[variant],
        className
      )}
    >
      {text}
    </span>
  );
};

export default Badge;
```

---

#### Step 8: è©³ç´°ãƒšãƒ¼ã‚¸å°‚ç”¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ä½œæˆ

**8-1. VimeoPlayer ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆé‡è¦ï¼‰**

**ä½œæˆãƒ•ã‚¡ã‚¤ãƒ«:** `src/components/content/VimeoPlayer.tsx`

```typescript
import React from "react";

interface VimeoPlayerProps {
  vimeoUrl: string;
  className?: string;
}

const VimeoPlayer: React.FC<VimeoPlayerProps> = ({ vimeoUrl, className }) => {
  // Vimeo URLã‹ã‚‰ãƒ“ãƒ‡ã‚ªIDã‚’æŠ½å‡º
  const getVimeoId = (url: string): string | null => {
    const match = url.match(/vimeo\.com\/(\d+)/);
    return match ? match[1] : null;
  };

  const videoId = getVimeoId(vimeoUrl);

  if (!videoId) {
    return (
      <div className="bg-gray-100 rounded p-4 text-center text-gray-600">
        ç„¡åŠ¹ãªVimeo URLã§ã™
      </div>
    );
  }

  return (
    <div className={className}>
      <div className="relative w-full" style={{ paddingTop: "56.25%" }}>
        <iframe
          src={`https://player.vimeo.com/video/${videoId}?title=0&byline=0&portrait=0`}
          className="absolute top-0 left-0 w-full h-full rounded"
          frameBorder="0"
          allow="autoplay; fullscreen; picture-in-picture"
          allowFullScreen
          title="Vimeo video player"
        />
      </div>
    </div>
  );
};

export default VimeoPlayer;
```

**8-2. SanityContent ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆãƒªãƒƒãƒãƒ†ã‚­ã‚¹ãƒˆè¡¨ç¤ºç”¨ï¼‰**

**ä½œæˆãƒ•ã‚¡ã‚¤ãƒ«:** `src/components/content/SanityContent.tsx`

````typescript
import React from 'react';
import type { SanityBlock } from '@/types/lesson';

interface SanityContentProps {
  blocks?: SanityBlock[];
  className?: string;
}

const SanityContent: React.FC<SanityContentProps> = ({ blocks, className }) => {
  if (!blocks || blocks.length === 0) {
    return null;
  }

  return (
    <div className={className}>
      {blocks.map((block, index) => {
        const text = block.children?.map(child => child.text).join('') || '';

        switch (block.style) {
          case 'h2':
            return <h2 key={index} className="text-2xl font-bold mb-4 mt-8">{text}</h2>;
          case 'h3':
            return <h3 key={index} className="text-xl font-bold mb-3 mt-6">{text}</h3>;
          case 'blockquote':
            return (
              <blockquote key={index} className="border-l-4 border-gray-300 pl-4 italic my-4">
                {text}
              </blockquote>
            );
          default:
            return <p key={index} className="mb-4 leading-relaxed">{text}</p>;
        }
      })}
    </div>
  );
};

export default SanityContent;

**8-3. LessonHero, LessonOverview, LessonObjectives ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**

ã“ã‚Œã‚‰ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯æ—¢å­˜ã®è¨ˆç”»ã‚’Sanityå¯¾å¿œã«èª¿æ•´ã—ã¦å®Ÿè£…ã—ã¾ã™ã€‚

**ä½œæˆãƒ•ã‚¡ã‚¤ãƒ«:**
- `src/components/lessons/detail/LessonHero.tsx`
- `src/components/lessons/detail/LessonOverview.tsx`
- `src/components/lessons/detail/LessonObjectives.tsx`
- `src/components/lessons/detail/QuestCard.tsx`
- `src/components/lessons/detail/ContentPreview.tsx`

**ä¸»ãªå¤‰æ›´ç‚¹:**
- ç”»åƒã¯ `urlFor(lesson.icon).url()` ã§å–å¾—
- æ¦‚è¦ã¯ `SanityContent` ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§è¡¨ç¤º
- èƒŒæ™¯SVGã‚‚ `urlFor()` ã§å‡¦ç†

---

#### Step 9: ãƒ¬ãƒƒã‚¹ãƒ³ä¸€è¦§ãƒšãƒ¼ã‚¸ã®Sanityå¯¾å¿œ

æ—¢å­˜ã®ä¸€è¦§ãƒšãƒ¼ã‚¸ã‚’Sanityã‹ã‚‰ãƒ‡ãƒ¼ã‚¿å–å¾—ã™ã‚‹ã‚ˆã†ã«å¤‰æ›´ã—ã¾ã™ã€‚

**æ›´æ–°ãƒ•ã‚¡ã‚¤ãƒ«:** `src/pages/Lessons/index.tsx`

**å¤‰æ›´å†…å®¹:**
```typescript
import { useLessons } from '@/hooks/useLessons';
import { urlFor } from '@/lib/sanity';

const Lessons: React.FC = () => {
  const navigate = useNavigate();
  const { lessons, loading, error } = useLessons();

  if (loading) {
    return (
      <Layout>
        <div className="flex justify-center items-center min-h-screen">
          <p>èª­ã¿è¾¼ã¿ä¸­...</p>
        </div>
      </Layout>
    );
  }

  if (error) {
    return (
      <Layout>
        <div className="flex justify-center items-center min-h-screen">
          <p>ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: {error.message}</p>
        </div>
      </Layout>
    );
  }

  // ...ä»¥é™ã¯åŒã˜
};
````

**LessonCard ã®ç”»åƒè¡¨ç¤º:**

```typescript
<img
  src={urlFor(lesson.coverImage).width(342).height(512).url()}
  alt={`${lesson.title}ã®ã‚«ãƒãƒ¼ç”»åƒ`}
  className="w-[85.55px] h-32 object-cover block"
/>
```

---

#### Step 10: ãƒ¬ãƒƒã‚¹ãƒ³è©³ç´°ãƒšãƒ¼ã‚¸ã®å®Ÿè£…

**ä½œæˆãƒ•ã‚¡ã‚¤ãƒ«:** `src/pages/Lessons/Detail.tsx`

```typescript
import React from "react";
import { useParams, useNavigate } from "react-router-dom";
import Layout from "@/components/layout/Layout";
import { useLesson } from "@/hooks/useLessons";
import { urlFor } from "@/lib/sanity";
import HeadingBlock2 from "@/components/common/HeadingBlock2";
import LessonHero from "@/components/lessons/detail/LessonHero";
import LessonOverview from "@/components/lessons/detail/LessonOverview";
import LessonObjectives from "@/components/lessons/detail/LessonObjectives";
import QuestCard from "@/components/lessons/detail/QuestCard";

const LessonDetail: React.FC = () => {
  const { slug } = useParams<{ slug: string }>();
  const navigate = useNavigate();
  const { lesson, loading, error } = useLesson(slug || "");

  const handleStart = () => {
    if (!lesson || !lesson.quests || lesson.quests.length === 0) return;

    const firstQuest = lesson.quests[0];
    const firstContent = firstQuest.contents[0];

    // Phase 2ã§å®Ÿè£…
    console.log(
      `Navigate to: /lessons/${slug}/quests/${firstQuest.slug}/${firstContent.slug}`
    );
  };

  if (loading) {
    return (
      <Layout>
        <div className="flex justify-center items-center min-h-screen">
          <p>èª­ã¿è¾¼ã¿ä¸­...</p>
        </div>
      </Layout>
    );
  }

  if (error || !lesson) {
    return (
      <Layout>
        <div className="flex justify-center items-center min-h-screen">
          <p>ãƒ¬ãƒƒã‚¹ãƒ³ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ</p>
        </div>
      </Layout>
    );
  }

  return (
    <Layout>
      <div className="flex flex-col items-center py-12 px-4 md:px-6 lg:px-0 bg-white">
        <div className="flex flex-col gap-12 w-full max-w-[1088px]">
          {/* Hero */}
          <LessonHero
            title={lesson.title}
            description={lesson.description}
            icon={lesson.icon}
            backgroundSvg={lesson.backgroundSvg}
            categories={lesson.categories}
            roadmap={lesson.roadmap}
            onStart={handleStart}
          />

          {/* æ¦‚è¦ */}
          {lesson.overview && (
            <div className="flex flex-col gap-4">
              <HeadingBlock2>æ¦‚è¦</HeadingBlock2>
              <LessonOverview overview={lesson.overview} />
            </div>
          )}

          {/* å­¦ç¿’ç›®æ¨™ */}
          <div className="flex flex-col gap-4">
            <HeadingBlock2>å­¦ç¿’ç›®æ¨™</HeadingBlock2>
            <LessonObjectives objectives={lesson.objectives} />
          </div>

          {/* ã‚¯ã‚¨ã‚¹ãƒˆä¸€è¦§ */}
          <div className="flex flex-col gap-6">
            <HeadingBlock2>ã‚¯ã‚¨ã‚¹ãƒˆä¸€è¦§</HeadingBlock2>
            <div className="flex flex-col gap-4">
              {lesson.quests.map((quest, index) => (
                <QuestCard
                  key={quest.slug}
                  quest={quest}
                  questNumber={index + 1}
                />
              ))}
            </div>
          </div>
        </div>
      </div>
    </Layout>
  );
};

export default LessonDetail;
```

---

#### Step 11: ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°è¨­å®š

**æ›´æ–°ãƒ•ã‚¡ã‚¤ãƒ«:** `src/App.tsx`

```typescript
import LessonDetail from "./pages/Lessons/Detail";

// ãƒ«ãƒ¼ãƒˆè¿½åŠ ï¼ˆ/lessonsã‚ˆã‚Šä¸‹ã«é…ç½®ï¼‰
<Routes>
  <Route path="/" element={<Home />} />
  <Route path="/lessons" element={<Lessons />} />
  <Route path="/lessons/:slug" element={<LessonDetail />} />
  {/* ãã®ä»–ã®ãƒ«ãƒ¼ãƒˆ */}
</Routes>;
```

---

#### Step 12: ç’°å¢ƒå¤‰æ•°ã®è¨­å®š

**1. Sanity Project ID ã®å–å¾—**

```bash
cd sanity-studio
sanity manage
```

â†’ ãƒ–ãƒ©ã‚¦ã‚¶ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šã‚’é–‹ãã€Project ID ã‚’ã‚³ãƒ”ãƒ¼

**2. .env.local ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ**

**ä½œæˆãƒ•ã‚¡ã‚¤ãƒ«:** `.env.local`

```bash
VITE_SANITY_PROJECT_ID=your_actual_project_id_here
VITE_SANITY_DATASET=production
VITE_SANITY_API_VERSION=2024-01-01
```

**3. .gitignore ã«è¿½åŠ ï¼ˆæ—¢ã«ã‚ã‚‹å ´åˆã¯ã‚¹ã‚­ãƒƒãƒ—ï¼‰**

```
.env.local
```

---

#### Step 13: ãƒ†ã‚¹ãƒˆãƒ»æ¤œè¨¼

**13-1. Sanity Studio ã§ãƒ‡ãƒ¼ã‚¿ç¢ºèª**

```bash
cd sanity-studio
npm run dev
```

â†’ `http://localhost:3333` ã§ã‚µãƒ³ãƒ—ãƒ«ãƒ¬ãƒƒã‚¹ãƒ³ãŒæ­£ã—ãä½œæˆã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª

**13-2. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ“ãƒ«ãƒ‰**

```bash
npm run build
```

**13-3. å‹ãƒã‚§ãƒƒã‚¯**

```bash
npm run typecheck
```

**13-4. Lint**

```bash
npm run lint
```

**13-5. é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•**

```bash
npm run dev
```

**13-6. å‹•ä½œç¢ºèª**

- `/lessons` - ä¸€è¦§ãƒšãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹ï¼ˆSanity ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿å–å¾—ï¼‰
- ãƒ¬ãƒƒã‚¹ãƒ³ã‚«ãƒ¼ãƒ‰ã‚¯ãƒªãƒƒã‚¯ â†’ è©³ç´°ãƒšãƒ¼ã‚¸ã¸é·ç§»
- `/lessons/[slug]` - è©³ç´°ãƒšãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹
  - Heroã€æ¦‚è¦ã€å­¦ç¿’ç›®æ¨™ã€ã‚¯ã‚¨ã‚¹ãƒˆä¸€è¦§ãŒã™ã¹ã¦è¡¨ç¤º
  - ç”»åƒãŒ Sanity CDN ã‹ã‚‰æ­£ã—ãèª­ã¿è¾¼ã¾ã‚Œã‚‹
  - ã‚«ãƒ†ã‚´ãƒªãƒ»ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—ã®ãƒ”ãƒ«ãŒè¡¨ç¤º
  - ã€Œã¯ã˜ã‚ã‚‹ã€ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ â†’ console.log ãŒå‡ºåŠ›

**13-7. Vimeo å‹•ç”»ç¢ºèªï¼ˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒšãƒ¼ã‚¸å®Ÿè£…å¾Œï¼‰**

- Phase 2 ã§å®Ÿè£…äºˆå®š

---

### æˆæœç‰©ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

Phase 1 å®Œäº†æ™‚ã«ä»¥ä¸‹ãŒã™ã¹ã¦å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã“ã¨:

#### Sanity CMS

- [ ] Sanity ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒä½œæˆã•ã‚Œã€Studio èµ·å‹•ã§ãã‚‹
- [ ] å…¨ã‚¹ã‚­ãƒ¼ãƒï¼ˆCategory, Roadmap, Content, Quest, Lessonï¼‰ãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹
- [ ] Sanity Studio ã§å°‘ãªãã¨ã‚‚ 1 ã¤ã®ã‚µãƒ³ãƒ—ãƒ«ãƒ¬ãƒƒã‚¹ãƒ³ãŒä½œæˆã•ã‚Œã¦ã„ã‚‹
- [ ] ã‚µãƒ³ãƒ—ãƒ«ãƒ¬ãƒƒã‚¹ãƒ³ã«ç”»åƒã€ã‚¯ã‚¨ã‚¹ãƒˆã€ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒå«ã¾ã‚Œã¦ã„ã‚‹
- [ ] å‹•ç”»ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã« Vimeo URL ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹

#### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰

- [ ] Sanity Client ãŒè¨­å®šã•ã‚Œã€ãƒ‡ãƒ¼ã‚¿å–å¾—ã§ãã‚‹
- [ ] TypeScript å‹å®šç¾©ï¼ˆSanity å¯¾å¿œï¼‰ãŒå®Œæˆã—ã¦ã„ã‚‹
- [ ] ç”»åƒ URL ç”Ÿæˆï¼ˆurlForï¼‰ãŒæ©Ÿèƒ½ã—ã¦ã„ã‚‹
- [ ] useLessons, useLesson ãƒ•ãƒƒã‚¯ãŒå‹•ä½œã™ã‚‹
- [ ] GROQ ã‚¯ã‚¨ãƒªãŒæ­£ã—ããƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹

#### UI ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

- [ ] Pill, Badge ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒä½œæˆã•ã‚Œã¦ã„ã‚‹
- [ ] VimeoPlayer ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒä½œæˆã•ã‚Œã¦ã„ã‚‹
- [ ] SanityContent ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒä½œæˆã•ã‚Œã¦ã„ã‚‹
- [ ] LessonHero, LessonOverview, LessonObjectives, QuestCard, ContentPreview ãŒä½œæˆã•ã‚Œã¦ã„ã‚‹

#### ãƒšãƒ¼ã‚¸

- [ ] ãƒ¬ãƒƒã‚¹ãƒ³ä¸€è¦§ãƒšãƒ¼ã‚¸ãŒ Sanity ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿å–å¾—ã—ã¦ã„ã‚‹
- [ ] ãƒ¬ãƒƒã‚¹ãƒ³è©³ç´°ãƒšãƒ¼ã‚¸ (`/lessons/[slug]`) ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] ä¸€è¦§ãƒšãƒ¼ã‚¸ã‹ã‚‰ã‚«ãƒ¼ãƒ‰ã‚¯ãƒªãƒƒã‚¯ã§è©³ç´°ãƒšãƒ¼ã‚¸ã¸é·ç§»ã§ãã‚‹
- [ ] è©³ç´°ãƒšãƒ¼ã‚¸ã§ã™ã¹ã¦ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆHeroã€æ¦‚è¦ã€ç›®æ¨™ã€ã‚¯ã‚¨ã‚¹ãƒˆï¼‰ãŒè¡¨ç¤ºã•ã‚Œã‚‹

#### å“è³ª

- [ ] ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³ãŒé©åˆ‡ã«æ©Ÿèƒ½ã—ã¦ã„ã‚‹
- [ ] ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£åŸºæº–ï¼ˆè¦‹å‡ºã—éšå±¤ã€ARIA å±æ€§ï¼‰ã‚’æº€ãŸã—ã¦ã„ã‚‹
- [ ] ãƒ“ãƒ«ãƒ‰ãƒ»ãƒªãƒ³ãƒˆãƒ»å‹ãƒã‚§ãƒƒã‚¯ãŒã™ã¹ã¦ãƒ‘ã‚¹ã™ã‚‹
- [ ] ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãƒ»ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãŒå®Ÿè£…ã•ã‚Œã¦ã„ã‚‹

---

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

## ğŸ“‹ Phase 2 ä»¥é™ã®äºˆå®šï¼ˆå‚è€ƒï¼‰

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

### Phase 2: ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒšãƒ¼ã‚¸

- [ ] `/lessons/[slug]/quests/[questSlug]/[contentSlug]`ãƒ«ãƒ¼ãƒˆå®Ÿè£…
- [ ] å‹•ç”»ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒšãƒ¼ã‚¸ï¼ˆVimeoPlayer ä½¿ç”¨ï¼‰
- [ ] è¨˜äº‹ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒšãƒ¼ã‚¸ï¼ˆSanityContent ä½¿ç”¨ï¼‰
- [ ] å‰å¾Œã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¸ã®ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
- [ ] Vimeo åŸ‹ã‚è¾¼ã¿ã®å‹•ä½œç¢ºèª

### Phase 3: é€²æ—ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°

- [ ] localStorage ã§ã®é€²æ—ç®¡ç†
- [ ] Progress å‹ã®å®Ÿè£…
- [ ] å®Œäº†çŠ¶æ…‹ã®è¡¨ç¤ºï¼ˆãƒãƒƒã‚¸ã€ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ï¼‰
- [ ] ã€Œã¯ã˜ã‚ã‚‹ã€ã€Œç¶šãã‹ã‚‰ã€ã®å‡ºã—åˆ†ã‘ãƒ­ã‚¸ãƒƒã‚¯
- [ ] ã‚¯ã‚¨ã‚¹ãƒˆãƒ»ãƒ¬ãƒƒã‚¹ãƒ³å®Œäº†ãƒ­ã‚¸ãƒƒã‚¯

### Phase 4: é«˜åº¦ãªæ©Ÿèƒ½

- [ ] å‹•ç”» 80%å†ç”Ÿã§ã®è‡ªå‹•å®Œäº†
- [ ] è¨˜äº‹ 90%ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã§ã®è‡ªå‹•å®Œäº†
- [ ] GA é€£æºï¼ˆã‚¤ãƒ™ãƒ³ãƒˆãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ï¼‰
- [ ] é–¢é€£ãƒ¬ãƒƒã‚¹ãƒ³è¡¨ç¤º
- [ ] StickyStart ãƒœã‚¿ãƒ³ï¼ˆãƒ¢ãƒã‚¤ãƒ«ï¼‰
- [ ] æœ‰æ–™/ç„¡æ–™ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®å‡ºã—åˆ†ã‘å®Ÿè£…

---

## è£œè¶³: Sanity é‹ç”¨ Tips

### ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰

- Sanity Studio ã§ç›´æ¥ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—
- è‡ªå‹•çš„ã«æœ€é©åŒ–ãƒ»CDN é…ä¿¡
- hotspot è¨­å®šã§é‡è¦é ˜åŸŸã‚’æŒ‡å®šå¯èƒ½

### ãƒ‡ãƒ¼ã‚¿ç·¨é›†

- ãƒ–ãƒ©ã‚¦ã‚¶ãƒ™ãƒ¼ã‚¹ã§ç·¨é›†
- ä¸‹æ›¸ãä¿å­˜ãŒå¯èƒ½
- å…¬é–‹/éå…¬é–‹ã®åˆ‡ã‚Šæ›¿ãˆãŒç°¡å˜

### æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤æ™‚

1. Sanity Studio ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

```bash
cd sanity-studio
sanity deploy
```

â†’ `https://your-project.sanity.studio` ã§ Studio ã«ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½

2. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã«ç’°å¢ƒå¤‰æ•°è¨­å®š

- Vercel/Netlify ãªã©ã§ `VITE_SANITY_PROJECT_ID` ã‚’è¨­å®š

### ãƒ‡ãƒ¼ã‚¿ç§»è¡Œï¼ˆå°†æ¥çš„ã«ï¼‰

- æ—¢å­˜ã®é™çš„ãƒ‡ãƒ¼ã‚¿ã‚’ Sanity ã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½œæˆå¯èƒ½
- Sanity Migration Toolkit ä½¿ç”¨

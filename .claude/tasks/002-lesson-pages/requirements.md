# レッスンページ実装 - 要件整理ドキュメント

このファイルに、実装したい内容をフェーズごとに記入してください。

**記入方法：**

- Phase 1 を優先的に記入
- Phase 2, 3 は後で記入しても OK
- 記入完了したら Claude に教えてください

---

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

# 📋 Phase 0: 全体設計（URL 構造・決定事項）

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

## URL 構造

### ✅ 決定事項

```
✅ /lessons/:slug （レッスン詳細）
✅ /articles/:slug （記事詳細）
```

**採用理由：**

- SEO 的に問題なし
- 実装がシンプル
- 記事の検索・一覧が簡単
- 柔軟性が高い

**却下したパターン：**

```
❌ /lessons/:slug/articles/:slug （ネストURL）
理由：実装が複雑、記事単位での検索が面倒
```

---

## ページ一覧

```
✅ /lessons （レッスン一覧） ← 既存の /sanity-test を /lessons に移行
✅ /lessons/:slug （レッスン詳細）
✅ /articles/:slug （記事詳細）
```

---

## 動画と記事の扱い

### ✅ 決定事項：統合ページ

```
✅ 動画も記事も同じページ・デザイン（/articles/:slug）
✅ article スキーマに videoUrl フィールドを追加
✅ 動画があるかどうかで表示が変わるだけ
```

**理由：**

- コード量が少ない
- デザインの一貫性
- 管理がシンプル

---

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

# 🎯 Phase 1: レッスン詳細ページ

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

# 👉 今すぐ記入が必要！

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

## 1-1. ページ構成（既に記入済み）

```
/lessons/:slug （レッスン詳細ページ）

Hero（ヒーロー）+概要
  - 背景グラデーションのブロック
    - バックナビゲーションのエリア
  - 概要
    - レッスンのアイコン
    - タイトル
    - ディスクリプション
    - インフォエリア
      - レッスンカテゴリ
      - レッスンが所属しているロードマップ（実装後に）
      - レッスンのレベル（未経験、ジュニア、ミドル）← 実装は後でもOK

コンテンツ切り替えのタブ
  - コンテンツタブ（デフォルト表示）
    - クエスト一覧
      └─ 各クエスト
        - クエストに所属する記事リスト
  - 概要・目的タブ
    - 誰向けか - 箇条書き
    - レッスンの説明（リッチテキスト）
```

---

## 1-2. 表示する情報とデザイン

レッスン詳細ページに表示したい情報と構造とレイアウトを Figma のデザインで共有します
各要素をコンポーネントにしてほしいです。

#### 👉 [ヒーローセクション](./design-hero-section.md)

- 背景デザイン、バックナビゲーション、アイコン、タイトル、ディスクリプション、インフォエリア

#### 👉 [タブ切り替えセクション](./design-tab-switching.md)

- タブ UI の基本デザイン、非アクティブ/アクティブタブ、アニメーション

#### 👉 [コンテンツタブ：クエスト＋コンテンツ一覧の表示](./design-content-tab.md)

- クエストアコーディオン、クエストヘッダー、記事リストアイテム

#### 👉 [概要・目的タブ](./design-overview-tab.md)

- コンテナ、リッチテキストのスタイル（H2, H3, 段落, 太字, 斜体, リンク, リスト）

## 1-3. インタラクション（ユーザーができること）

✅ タブ切り替え（コンテンツ / 概要・目的）
✅ 記事をクリックして記事詳細ページへ遷移

他にやりたいこと：
（ここに記入）

- 「はじめる」ボタンでクエスト 1 の最初の記事に行く。
- 進捗状況を表示する？（Phase 3 で実装？）→ 表示したいです。ただ「チェック機能」を作成するときに実装したい
- お気に入り登録？（Phase 3 で実装？）→ こちらも Phase3 などで

### デザインで重視したいポイント

✅ レスポンシブ対応 → 共有しているデータはデスクトップのデータ。後のフェーズでも良いので（モバイル/タブレット/デスクトップ）でレスポンシブで表示できるものにしてもらえると嬉しい
✅ 既存 BONO のデザインと統一感
→ 色の定義は新しい token？としてサービスで使うカラーに登録してほしいです。後から統一感を持って使えるように役割ごとにできる限り登録しながら実装してほしい
→ 既存に使って色を使って既存 BONO との統一感を図ってほしいですが、基本的に役割で当てたコンポーネントやトークンや色定義などを使ってほしいです。
→ フォントサイズや余白は tailwindCSS を使って近い値を適用してほしいです。

---

## 1-5. Phase 1 で実装する範囲

### Must Have（必須）

✅ レッスン詳細ページの基本表示
✅ Hero + 概要エリア
✅ タブ切り替え機能
✅ クエスト一覧の表示
✅ 記事リストの表示
✅ 記事クリックで記事詳細ページへ遷移

その他の必須機能：
（ここに記入）
→ まずはデスクトップのデザイン、レスポンシブで組めるように準備ができるならできる部分はやってほしい

### Nice to Have（後回し OK）

以下の項目は後で開発したいので後でタスクを整理する際のメモに残せるようにしてほしいです。

⏸️ ロードマップ表示
⏸️ レベル表示
⏸️ 進捗トラッキング
⏸️ お気に入り機能

その他：
（ここに記入）

---

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

# 📄 Phase 2: 記事詳細ページ

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

# 👉 Phase 1 完了後に記入してください

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

## 2-1. ページ構成（既に記入済み）

```

/articles/:slug （記事詳細ページ）

動画エリア（動画がある場合のみ表示）

- Vimeo 埋め込みプレイヤー

コンテンツ概要エリア

- 所属クエスト
- タイトル
- ディスクリプション

記事本文エリア

- 見出し（H2, H3）
- 段落
- 画像
- リンク
- その他のリッチテキスト要素

関連レッスンエリア

- 関連レッスンへのリンク

```

**変更・追加したい内容：**

```

（Phase 1 完了後に記入）

```

---

## 2-2. 動画（Vimeo）の要件

### 動画の表示場所

```

✅ 記事詳細ページの上部に埋め込む
└─ videoUrl フィールドがある場合のみ表示

```

### 動画の機能要件

```

✅ Vimeo 動画の埋め込み
✅ レスポンシブ対応（16:9）

他に必要な機能：
（Phase 1 完了後に記入）

- 再生時間の記録？
- 80%再生で自動的に「完了」にする？
- 字幕対応？

```

### 動画データの構造

```

✅ article スキーマに videoUrl フィールドを追加
└─ videoUrl が空の場合 = 記事のみ
└─ videoUrl がある場合 = 動画 + 記事本文

```

---

## 2-3. 記事本文の要件

### サポートする要素

- [x] 見出し（H2, H3）
- [x] 段落
- [x] 太字・斜体
- [x] リンク
- [x] 画像（本文中）
- [ ] 引用（blockquote）
- [ ] コードブロック
- [ ] リスト（箇条書き・番号付き）
- [ ] テーブル（表）
- [ ] その他：

### 画像の扱い

```

✅ Sanity から画像をアップロード
✅ CDN 経由で配信
✅ レスポンシブ対応

追加要件：
（Phase 1 完了後に記入）

- キャプション表示
- 画像の拡大表示（ライトボックス）

```

### リンクの扱い

```

✅ 外部リンク：別タブで開く（target="\_blank"）
✅ 内部リンク：同じタブで開く

その他の要件：
（Phase 1 完了後に記入）

```

---

## 2-4. Phase 2 で実装する範囲

### Must Have（必須）

```

✅ 記事詳細ページの基本表示
✅ 動画の埋め込み（videoUrl がある場合）
✅ 記事本文のレンダリング（H2, H3, 段落, 画像, リンク）
✅ 関連レッスンへのリンク

その他の必須機能：
（Phase 1 完了後に記入）

```

### Nice to Have（後回し OK）

```

⏸️ 記事の進捗トラッキング
⏸️ 動画の再生時間記録
⏸️ コードブロック対応
⏸️ 画像ライトボックス

その他：
（Phase 1 完了後に記入）

```

---

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

# ✨ Phase 3: 追加機能・改善

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

# 👉 Phase 2 完了後に記入してください

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

## 3-1. 進捗トラッキング

```

（Phase 2 完了後に記入）

- どのレベルまで進捗を記録する？（レッスン/クエスト/記事）
- どこに保存する？（localStorage / Supabase / 他）
- どのように表示する？（プログレスバー / チェックマーク）

```

---

## 3-2. ロードマップ・レベル機能

```

（Phase 2 完了後に記入）

- ロードマップの構造
- レベルの定義（未経験/ジュニア/ミドル/シニア？）
- レッスンとの紐付け方法

```

---

## 3-3. その他の追加機能

```

（Phase 2 完了後に記入）

- お気に入り機能
- コメント機能
- 検索機能
- フィルタリング

```

---

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

# 📝 メモ・不明点・確認したいこと

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

## 不明点・確認したいこと

```

（ここに記入）

```

---

## その他の要望・コメント

```

（ここに記入）

```

---

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

# ✅ Phase 1 記入完了後のアクション

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Phase 1 の記入が完了したら、Claude に **「Phase 1 の記入完了しました」** と教えてください。

記入内容をもとに：

1. Sanity スキーマの更新計画
2. 詳細な実装計画（コンポーネント設計、ルーティングなど）
3. 実装ステップの作成

を作成します！

```

```

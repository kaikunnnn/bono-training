# マークダウンファイルで Training コンテンツを管理・表示する

以下の仕組みを実装して、マークダウンファイルで Training コンテンツを管理・表示できるようにしたいです。

# トレーニングコンテンツ管理システム実装方針

## 📋 最低限必要な 4 項目のみ

### 1. **何を作るか（ゴール・要件定義）**

> あなたが求める機能を明確にして、開発者との認識合わせ

#### 1.1 基本的な要件

- [ ] マークダウンファイルでトレーニングコンテンツを作成・管理したい
- [ ] 無料ユーザーと有料ユーザーでコンテンツを出し分けたい
- [ ] セキュアに有料コンテンツを保護したい
- [ ] 新しいコンテンツを簡単に追加できるようにしたい

#### 1.2 具体的にできるようになること

- **コンテンツ作成**: Cursor でマークダウンファイルを書く
- **ファイル管理**: Supabase Storage にアップロードして管理
- **無料/有料制御**: `is_premium: true/false`で簡単に設定
- **自動表示**: 書いたファイルがサイトに自動で表示される

#### 1.3 あなたの作業範囲

- ✅ **やること**: コンテンツの企画・執筆・ファイル管理
- ❌ **やらないこと**: プログラミング・サーバー設定・デプロイ

---

### 2. **ファイルをどう整理するか（構造設計）**

> 混乱しないファイル構造とルール

#### 2.1 Supabase Storage 構造（確定版）

```
content/training/
├── todo-app/                    # Training名（英語・小文字・ハイフン）
│   ├── index.md                 # Training全体の説明
│   └── tasks/
│       ├── 01-introduction/     # タスク（番号-英語名）
│       │   └── content.md       # タスクの内容
│       ├── 02-advanced/
│       │   └── content.md
│       └── 03-premium/
│           └── content.md
├── figma-basics/
│   ├── index.md
│   └── tasks/
│       └── 01-getting-started/
│           └── content.md
```

#### 2.2 命名ルール

- **Training 名**: `todo-app`, `figma-basics`（英語・小文字・ハイフン区切り）
- **タスク名**: `01-introduction`, `02-advanced`（番号-英語名）
- **ファイル名**: `index.md`（Training 説明）、`content.md`（タスク内容）

#### 2.3 URL 対応

- Training 一覧: `/training`
- Training 詳細: `/training/todo-app`
- Task 詳細: `/training/todo-app/introduction`

---

### 3. **どう書くか（マークダウン記述ルール）**

> 間違わないマークダウンファイルの書き方

#### 3.1 Training 説明ファイル（index.md）のテンプレート

```markdown
---
title: "TodoアプリUI制作"
description: "実践的なTodoアプリのUIデザインを学ぶ"
type: "challenge"
difficulty: "normal"
tags: ["ui", "todo", "実践"]
estimated_total_time: "2時間"
task_count: 2
---

# Todo アプリ UI 制作

実際に使える Todo アプリの UI デザインを作りながら、
実践的な UI 設計スキルを身につけます。

## 学習内容

- ユーザビリティを考慮した UI 設計
- 効果的な情報整理
- モバイルファーストデザイン

## 完成後のスキル

- 実用的なアプリ UI が作れる
- ユーザーの使いやすさを考慮したデザインができる
```

#### 3.2 タスク内容ファイル（content.md）のテンプレート

**無料タスクの場合**

```markdown
---
title: "はじめに"
slug: "introduction"
order: 1
is_premium: false
difficulty: "easy"
estimated_time: "60分"
tags: ["ui", "基本"]
video_preview: ""
video_full: ""
---

# はじめに

このタスクでは、Todo アプリの基本的な画面構成を学びます。

## 学習内容

- 画面の構成要素
- 基本的なレイアウト
- 色の使い方

## 手順

1. Figma で新しいファイルを作成
2. 画面サイズを設定（375×667px）
3. ヘッダーエリアを作成
4. メインコンテンツエリアを配置

## 完成イメージ

（ここに画像やスクリーンショットを挿入）

## 次のステップ

次のタスクでは、より詳細なコンポーネント設計を学びます。
```

**有料タスクの場合**

```markdown
---
title: "プロの実践テクニック"
slug: "pro-techniques"
order: 3
is_premium: true
difficulty: "hard"
estimated_time: "90分"
tags: ["上級", "プロ技術"]
video_preview: "https://storage.supabase.co/preview.mp4"
video_full: "https://storage.supabase.co/full.mp4"
---

# プロの実践テクニック

実際の制作現場で使われる高度なテクニックを学びます。

## 基本的な内容

ここは無料ユーザーにも見せる基本的な説明...

## 詳細な実践内容

ここから先の詳細な手順やプロの秘訣は、有料ユーザーのみに表示されます。

（システムが自動で無料ユーザーには途中まで表示し、
有料ユーザーには全内容を表示します）
```

#### 3.3 Front-matter 設定項目一覧

| 項目             | 意味               | 例                       | 必須 |
| ---------------- | ------------------ | ------------------------ | ---- |
| `title`          | タイトル           | "はじめに"               | ✅   |
| `slug`           | URL 用の名前       | "introduction"           | ✅   |
| `order`          | 表示順序           | 1, 2, 3...               | ✅   |
| `is_premium`     | 有料かどうか       | true / false             | ✅   |
| `difficulty`     | 難易度             | "easy", "normal", "hard" | ⭐   |
| `estimated_time` | 所要時間           | "30 分"                  | ⭐   |
| `tags`           | タグ               | ["ui", "figma"]          | ⭐   |
| `video_preview`  | プレビュー動画 URL | "https://..."            | ❌   |
| `video_full`     | フル動画 URL       | "https://..."            | ❌   |

**凡例**: ✅ 必須、⭐ 推奨、❌ オプション

---

### 4. **どう進めるか（作業手順・フロー）**

> 実際の作業ステップと注意点

#### 4.1 新しい Training 作成の手順

1. **企画**: Training 名、タスク構成を決める
2. **フォルダ作成**: Supabase で構造を作る
3. **index.md 作成**: Cursor で Training 説明を書く
4. **タスク作成**: 各タスクの content.md を書く
5. **アップロード**: Supabase にファイルをアップロード
6. **動作確認**: サイトで正しく表示されるか確認

#### 4.2 日常的なコンテンツ管理作業

1. **既存コンテンツの更新**

   - Cursor で既存 md ファイルを編集
   - Supabase で古いファイルを削除
   - 新しいファイルをアップロード

2. **新しいタスクの追加**
   - 新しいタスクフォルダを作成
   - content.md を作成
   - order の番号を適切に設定

#### 4.3 よくある間違いと対策

**❌ よくある間違い**

- Front-matter で全角コロンを使う
- slug 名に日本語や大文字を使う
- order 番号が重複する
- ファイル名を間違える

**✅ 正しい方法**

- 半角コロン（:）を使う
- slug 名は英語・小文字・ハイフンのみ
- order 番号は連番にする
- ファイル名は content.md で統一

#### 4.4 動作確認チェックリスト

- [ ] Training 一覧ページに新しい Training が表示される
- [ ] Training 詳細ページでタスク一覧が正しい順序で表示される
- [ ] 各タスクページが正しく表示される
- [ ] 無料タスクが全内容表示される
- [ ] 有料タスクが途中でゲートバナーが表示される（無料ユーザー時）
- [ ] 有料タスクが全内容表示される（有料ユーザー時）

---

## 🎯 まとめ：あなたがやること

### ✅ コンテンツ企画・作成

- Training・タスクの企画
- マークダウンファイルの執筆
- Front-matter の正しい設定

### ✅ ファイル管理

- Supabase Storage でのフォルダ・ファイル管理
- 定期的な内容更新・追加

### ✅ 品質管理

- 動作確認・テスト
- ユーザー目線でのコンテンツチェック

### ❌ やらないこと（開発者が担当）

- プログラミング・コーディング
- サーバー設定・デプロイ
- セキュリティ設定・権限制御
- バグ修正・システム最適化

---

## 📝 この 4 項目で十分な理由

1. **ゴール明確化**: 何を作るかが分かれば、開発者との連携がスムーズ
2. **構造統一**: ファイル構造が決まれば、迷わずコンテンツを作成できる
3. **記述ルール**: テンプレートに従えば、システムが正しく動作する
4. **作業手順**: ステップに従えば、間違いなくコンテンツを管理できる

技術的な詳細は開発者に任せて、あなたはコンテンツの質を高めることに集中できます！

---

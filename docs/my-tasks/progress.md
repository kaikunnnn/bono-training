
# トレーニング機能 実装の進捗状況

## 実装済み

### Task 1: データベース構造
- ✅ `training`テーブル作成
- ✅ `task`テーブル作成
- ✅ `user_progress`テーブル作成
- ✅ `subscriptions`テーブルに`plan_members`列追加

### Task 3: トレーニング専用レイアウト
- ✅ Tailwind設定に`training`カラーテーマとデザイン変数を追加
- ✅ `TrainingLayout.tsx`の実装

### Task 5: トレーニングの詳細ページ（部分的に完了）
- ✅ `TaskList.tsx`コンポーネント実装
  - ✅ 有料/無料バッジ表示
  - ✅ サブスクリプション状態に応じた表示切り替え

## 未実装

### Task 6: タスク（お題）詳細ページ
- ❌ `/training/[slug]/[taskSlug]`ルート実装
- ❌ `MdxPreview`コンポーネント
- ❌ プレミアムコンテンツのプレビュー制限機能

### Task 7: 進捗保存と表示機能
- ❌ チェックボックスUI実装
- ❌ 進捗保存API実装
- ❌ RLSポリシー設定
- ❌ 進捗バー実装

### Task 8: サブスクリプション拡張
- ⚠️ 一部完了
- ❌ `plan_members`と既存サブスクリプション判定の連携
- ❌ Stripe Webhookの調整

## 次に実装すべきタスク（優先度順）

1. **Task 6: タスク詳細ページ実装**
   - 詳細ページのルートとUIを作成
   - プレミアムコンテンツのプレビュー機能を実装

2. **Task 8: サブスクリプション拡張**
   - `plan_members`を既存サブスクリプション判定に統合
   - プレミアムコンテンツのアクセス制御を完成

3. **Task 7: 進捗保存と表示機能**
   - チェックボックスUI実装
   - 進捗保存API実装
   - 進捗バー表示

## 実装メモ

- `TaskList.tsx`は実装済みで、有料/無料表示の基本的な機能あり
- ただし、進捗表示（チェックマーク）は見た目だけで機能していない
- Supabase側の`user_progress`テーブルは作成済みだがRLSポリシーは設定されていない
- TrainingのデータベーススキーマとUI基本部分は完成済み

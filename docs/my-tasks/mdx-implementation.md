
# プレミアムコンテンツ実装の詳細

## 1. MDXの構造と区切り方法

### フロントマター
各MDXファイルの先頭には以下のようなフロントマターを記述します：

```yaml
---
title: "コンテンツタイトル"
slug: "content-slug"
order_index: 1  # 表示順序
is_premium: true  # プレミアムコンテンツかどうか
video_full: "845235300"  # 有料会員用の完全版動画ID
video_preview: "845235294"  # 無料ユーザー用のプレビュー動画ID
preview_sec: 30  # プレビュー秒数（プレビュー動画の長さ）
preview_marker: "<!--PREMIUM-->"  # オプション：カスタムマーカー
---
```

### コンテンツの区切り
プレミアムコンテンツは `<!--PREMIUM-->` マーカーで区切ります。このマーカーより前の部分は無料ユーザーにも表示され、後の部分は有料会員のみに表示されます。

```md
# 無料で見えるコンテンツ

これは誰でも見ることができる部分です。

<!--PREMIUM-->

# 有料会員限定コンテンツ

この部分は有料会員のみが閲覧できます。
```

## 2. MdxPreviewコンポーネントの機能強化

`MdxPreview` コンポーネントでは以下の処理を行います：

1. `content` を `<!--PREMIUM-->` （またはカスタムマーカー）で分割
2. 有料会員でなければ前半部分のみを表示し、その後に「続きを見るには課金」バナーを表示
3. 有料会員であれば全コンテンツを表示

## 3. TaskVideoコンポーネントの機能強化

`TaskVideo` コンポーネントでは以下の処理を行います：

1. ユーザーのサブスクリプションステータスを取得
2. ステータスに応じて表示する動画IDを決定：
   - 有料会員: `video_full` パラメータの値
   - 無料ユーザー: `video_preview` パラメータの値
3. プレビュー動画には秒数を表示するバッジを付ける

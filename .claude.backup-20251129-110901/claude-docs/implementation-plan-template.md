# 実装計画テンプレート

**作成日**: YYYY-MM-DD
**担当**: 名前
**ステータス**: 計画中 / 実装中 / 完了 / 保留

---

## 🎯 実装の目的

**何を実装するか（一行で）**:


**なぜ実装するか**:


---

## 📋 現状分析

### 現在の状態

**何ができている**:
- 

**何ができていない**:
- 

**問題点**:
- 

---

### 関連する既存コード・設定

**影響を受けるファイル**:
- `path/to/file1.ts` - 説明
- `path/to/file2.ts` - 説明

**使用する環境変数**:
- `VARIABLE_NAME` - 用途（参照: `.claude/docs/project-knowledge/environment-variables.md`）

**依存するライブラリ・API**:
- Stripe API（Checkout Session作成）
- Supabase（subscriptionsテーブル）

---

## 🎨 実装方針

### アプローチ

**選択した方法**:


**なぜこの方法を選んだか**:
1. 
2. 
3. 

**検討して却下した方法**:
| 方法 | 却下理由 |
|------|----------|
| 方法A | 理由 |
| 方法B | 理由 |

---

### 実装ステップ

**Phase 1: 準備**
- [ ] 関連ドキュメントを読む
- [ ] 既存コードを確認
- [ ] 必要な環境変数を確認
- [ ] テスト計画を立てる

**Phase 2: 実装**
- [ ] ステップ1の説明
- [ ] ステップ2の説明
- [ ] ステップ3の説明

**Phase 3: テスト**
- [ ] 正常系テスト
- [ ] 異常系テスト
- [ ] エッジケーステスト

**Phase 4: ドキュメント更新**
- [ ] 実装内容の記録
- [ ] トラブルシューティング情報の追加
- [ ] CURRENT-FOCUS.mdの更新

---

## ⚠️ リスクと対策

| リスク | 影響度 | 対策 |
|--------|--------|------|
| 2重課金の可能性 | 🔴 高 | 冪等性チェックを実装 |
| データ不整合 | 🟡 中 | トランザクション処理 |
| パフォーマンス低下 | 🟢 低 | インデックス追加 |

---

## 🧪 テストケース

### 正常系

**ケース1: [説明]**
- **前提条件**: 
- **実行内容**: 
- **期待結果**: 

**ケース2: [説明]**
- **前提条件**: 
- **実行内容**: 
- **期待結果**: 

---

### 異常系

**ケース1: [説明]**
- **前提条件**: 
- **実行内容**: 
- **期待結果**: 

---

### エッジケース

**ケース1: [説明]**
- **前提条件**: 
- **実行内容**: 
- **期待結果**: 

---

## 📝 実装の詳細

### ファイル構成

```
変更するファイル:
- path/to/file1.ts
- path/to/file2.ts

新規作成するファイル:
- path/to/new-file.ts
```

---

### 主要な関数・コンポーネント

**関数名: `functionName`**
- **目的**: 
- **引数**: 
- **戻り値**: 
- **エラーハンドリング**: 

---

### データベース変更

**テーブル**: `table_name`
- **変更内容**: 
- **マイグレーションファイル**: 
- **ロールバック方法**: 

---

## 🔍 確認事項

### 実装前チェック
- [ ] 関連するすべてのドキュメントを読んだ
- [ ] 既存コードの動作を理解した
- [ ] 環境変数がすべて設定されている
- [ ] 依存関係を確認した
- [ ] リスクを評価した

### 実装中チェック
- [ ] コーディング規約に従っている
- [ ] 型安全性を保っている
- [ ] エラーハンドリングを実装している
- [ ] こまめにテストしている

### 実装後チェック
- [ ] すべてのテストケースが通った
- [ ] ドキュメントを更新した
- [ ] エラー情報をトラブルシューティングに追加した
- [ ] 実装の決定事項を記録した

---

## 📖 参考資料

**関連ドキュメント**:
- [システム仕様書](../specifications/system-specification.md)
- [環境変数定義](../../project-knowledge/environment-variables.md)

**外部リソース**:
- [Stripe API Documentation](https://stripe.com/docs/api)
- [Supabase Documentation](https://supabase.com/docs)

---

## 📝 実装ログ

### 2025-MM-DD

**やったこと**:
- 

**発見した問題**:
- 

**解決方法**:
- 

**次回やること**:
- 

---

### 2025-MM-DD

（追記していく）

---

## ✅ 完了報告

**実装完了日**: YYYY-MM-DD

**最終的な成果物**:
- 

**残課題**:
- 

**次のステップ**:
- 

---

**このテンプレートを使って、実装前に必ず計画を立ててください。**
**「考えながら実装」ではなく、「計画してから実装」です。**
